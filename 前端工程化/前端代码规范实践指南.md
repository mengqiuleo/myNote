# å‰ç«¯ä»£ç è§„èŒƒå®è·µæŒ‡å—(ESLint,Prettier,Husky...)

[TOC]



åˆšå¼€å§‹æ¥è§¦ä»£ç è§„èŒƒï¼Œæ¯ä¸ªé¡¹ç›®éƒ½æ˜¯æŒ‰ç…§é…ç½®æ•™ç¨‹ä¸‹è½½npmåŒ…ï¼Œé…ç½®æ–‡ä»¶ï¼Œå¦‚æœé‡åˆ°bugï¼Œç›´æ¥å¤åˆ¶ç²˜è´´é”™è¯¯åˆ°ç™¾åº¦ï¼Œç„¶åä¿®æ”¹é…ç½®ï¼Œç»“æŸ...

èµ·åˆæˆ‘åªæ˜¯æƒ³è®©ä»£ç è·‘èµ·æ¥ï¼Œè‡³äºé‡Œé¢çš„é…ç½®æ˜¯ä»€ä¹ˆæ„æ€ï¼Œæ¯ä¸ªnpmåŒ…ä¹‹é—´åˆæœ‰ä»€ä¹ˆå…³ç³»ï¼Œä¸å¥½æ„æ€ï¼Œæˆ‘å¹¶ä¸å…³å¿ƒã€‚ä½†æ˜¯ï¼Œæ—¶é—´ä¸€é•¿ï¼Œå¼ºçƒˆçš„æ±‚çŸ¥æ¬²å°±ä¼šé©±ä½¿ä½ å»æ¢ç´¢(å› ä¸ºé¡¹ç›®ä¸­ç”¨äº†ï¼Œæ€•é¢è¯•è¢«é—®åˆ°ğŸ™ƒï¼Œä¸€å¥ç©ç¬‘)ã€‚

æ‰€ä»¥ï¼Œå…³äºè¿™ç¯‡æ–‡ç« ï¼šç†æ¸…æ¥šå„ä¸ªnpmåŒ…å„æœ‰ä»€ä¹ˆä½œç”¨ï¼Œä¹‹é—´æœ‰ä»€ä¹ˆè”ç³»ï¼Œä»¥åŠå¸¸è§çš„é…ç½®ã€‚





## ESLint

å®˜æ–¹æ–‡æ¡£ï¼š[ESLint](https://eslint.org/)

> Find and fix problems in your JavaScript code
>
> ESLint statically analyzes your code to quickly find problems. It is built into most text editors and you can run ESLint as part of your continuous integration pipeline.
>
> â€‹																										--å®˜æ–¹æ–‡æ¡£

### åŠŸèƒ½

- ä»£ç è´¨é‡æ–¹é¢çš„é”™è¯¯/å»ºè®®
- ä»£ç é£æ ¼æ–¹é¢çš„é”™è¯¯/å»ºè®®

ä»£ç è´¨é‡éå¸¸å®¹æ˜“ç†è§£ï¼Œæ¯”å¦‚ [eqeqeq](https://eslint.org/docs/rules/eqeqeq)è¿™ä¸ªæŠŠåŒç­‰æ”¹ä¸‰ç­‰çš„è§„åˆ™ï¼š `==` æ”¹æˆ `===`ï¼Œè¿™æ ·çš„è§„åˆ™å¯ä»¥æœ‰æ•ˆåœ°é¿å…ä¸€äº› Magic Code Bugã€‚

ä»£ç é£æ ¼ä¹Ÿæ˜¯å¾ˆå®¹æ˜“ç†è§£ï¼Œæ¯”å¦‚ä¸å–œæ¬¢åŠ åˆ†å·å°±åŠ ä¸€æ¡è§„åˆ™ [semi](https://eslint.org/docs/2.0.0/rules/semi)è§„åˆ™ï¼š

```json
{
  "semi": [2, "never"]
}
```



### ä¸ºä»€ä¹ˆè¦ç”¨ESLint

ä»£ç åƒä¸‡è¡Œï¼Œå®‰å…¨ç¬¬ä¸€è¡Œï¼›å‰ç«¯ä¸è§„èŒƒï¼ŒåŒäº‹ä¸¤è¡Œæ³ª

- ç»Ÿä¸€å›¢é˜Ÿç¼–ç è§„èŒƒï¼ˆå‘½åï¼Œä¼—å¤šæ ¼å¼ç­‰ï¼‰
- ç»Ÿä¸€è¯­æ³•ï¼Œæ¯•ç«Ÿesç‰ˆæœ¬å·²ç»ä¸å°‘äº†(var/let....)
- å‡å°‘gitä¸å¿…è¦çš„æäº¤ï¼ˆå¦‚æœæ–‡ä»¶æ ¼å¼ä¸ä¸€æ ·ï¼Œä¹Ÿä¼šè¢«gitæäº¤çš„ï¼‰
- é¿å…ä½çº§é”™è¯¯
- åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥è¯­æ³•ï¼Œè€Œä¸æ˜¯ç­‰JSå¼•æ“è¿è¡Œæ—¶æ‰æ£€æŸ¥



### å®‰è£…

å®‰è£…ESLintåŒ…æœ‰ä¸¤ç§æ–¹å¼ï¼š

- é€šè¿‡ npm æˆ– yarn ç›´æ¥è¿›è¡Œ å…¨å±€ æˆ– é¡¹ç›®å®‰è£… `npm i eslint -D`
- é€šè¿‡ vue è„šæ‰‹æ¶ åˆ›å»ºé¡¹ç›®æ—¶ é€‰æ‹©å®‰è£… eslint æ¨¡å—åŒ… `vue create åˆ›å»ºé¡¹ç›®è¿‡ç¨‹ä¸­é€‰æ‹© lint`

![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/å¯¹æ¯”.jpg)

### æ‰‹åŠ¨é…ç½®

é¦–å…ˆï¼Œ

- åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶å¤¹ï¼š`eslint_test`
- åˆå§‹åŒ–é¡¹ç›®ï¼š`npm init -y` (åˆ›å»º package.json)

ç„¶åï¼Œç›´æ¥å®‰è£…eslintåŒ…ï¼š`npm i eslint -D`

æ³¨æ„å®‰è£…ç»“æœï¼š**node_moduels** ä¸­ä¸‹è½½äº†å¾ˆå¤šåŒ…

- **.bin/eslint.cmd** è„šæœ¬æ–‡ä»¶ï¼Œå†…éƒ¨é€šè¿‡ **nodejs** æ‰§è¡Œ **eslintè¿è¡ŒåŒ…** çš„ä»£ç 
- **@eslintåŒ…** ç”¨æ¥è§„èŒƒ **eslinté…ç½®æ–‡ä»¶**
- **eslintå¼€å¤´çš„åŒ…** æ˜¯ **eslintè¿è¡ŒåŒ…**ï¼ŒåŒ…å«eslintä»£ç 

![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/é…ç½®.jpg)

**ç”ŸæˆESLinté…ç½®æ–‡ä»¶**

> ESLint å¯ä»¥åˆ›å»ºç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ **.eslintrc.js**ï¼Œä¹Ÿå¯ä»¥ ç›´æ¥åœ¨ **package.json** ä¸­é…ç½®
>
> æ”¯æŒ JavaScriptã€JSON æˆ–è€… YAML æ–‡ä»¶ä¸‰ç§æ ¼å¼ï¼ˆ`.eslintrc.*`ï¼‰ï¼Œä¼šåœ¨åˆ›å»ºè¿‡ç¨‹ä¸­è®©æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨å“ªç§æ–‡ä»¶æ ¼å¼

1. æ‰§è¡Œ `node_modules/.bin` æ–‡ä»¶å¤¹é‡Œçš„ **eslintè„šæœ¬** æ¥**åˆ›å»ºé…ç½®æ–‡ä»¶**

   - åŒ…å«å®Œæ•´è„šæœ¬è·¯å¾„çš„å‘½ä»¤ï¼š`./node_modules/.bin/eslint --init`

   - ä¹Ÿå¯ä»¥ç”¨ **npx** æ¥æ‰§è¡Œ **(æ¨è)**ï¼š`npx eslint --init`

     ï¼ˆ**npx**æ˜¯éšnodeä¸€èµ·å®‰è£…çš„ï¼Œèƒ½å» **.bin ç›®å½•** é‡Œæ‰¾ ç›®æ ‡è„šæœ¬æ–‡ä»¶ï¼Œç®€åŒ–æ‰§è¡Œè„šæœ¬çš„è¯­æ³•ï¼‰

2. åˆ›å»ºé…ç½®æ–‡ä»¶è¿‡ç¨‹ä¸­ï¼Œéœ€è¦é€‰æ‹©é…ç½®ï¼š

![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/é…ç½®æ–‡ä»¶.jpg)

3. æ‰§è¡Œç»“æœï¼š

- åˆ›å»ºäº† é…ç½®æ–‡ä»¶ `.eslintrc.js`

![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/ç»“æœ1.jpg)

- ä¸‹è½½äº†ç›¸å…³è§„èŒƒåŒ…
  - ä¸»è¦æ˜¯ä¸‹è½½äº† standard è¯­æ³•è§„èŒƒåŒ…ï¼Œè€Œå®ƒéœ€è¦ ç”¨åˆ° importã€nodeã€promise æ’ä»¶åŒ…

![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/ç»“æœ2.jpg)

ESLintæ‰§è¡Œ

- å‘½ä»¤ï¼š`npx eslint ./éœ€è¦æ£€æŸ¥è¯­æ³•çš„æ–‡ä»¶è·¯å¾„`
- å¦‚æœè¿æ³•è§„èŒƒï¼Œä¼šå°†é”™è¯¯æç¤ºåˆ° ç»ˆç«¯ï¼Œè¯´æ˜ eslint å·¥ä½œæ­£å¸¸

![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/å·¥ä½œæ­£å¸¸.jpg)

**ç¼–è¾‘å™¨ä¸Šä½¿ç”¨**

> æˆ‘ä»¬ç”¨ç¼–è¾‘å™¨ä¸Šå®‰è£…eslinté›†æˆï¼Œå¯ä»¥åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œå°±ä¼šå‡ºç°é”™è¯¯æˆ–è€…è­¦å‘Šæç¤ºï¼Œä¸ç”¨æ¯æ¬¡æ‰§è¡Œeslint æ¥çŸ¥é“æ˜¯å¦æœ‰é—®é¢˜ã€‚



### ESLinté…ç½®æ–‡ä»¶è§£æ

**é…ç½®æ–‡ä»¶æ ¼å¼**

- æˆ‘ä»¬é€šè¿‡ `npx eslint --init` åˆ›å»ºé…ç½®æ–‡ä»¶æ—¶ï¼Œæœ‰æä¾›é…ç½®æ–‡ä»¶çš„æ ¼å¼ç»™æˆ‘ä»¬é€‰æ‹©ï¼š
  - .js / .yaml / .json

![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/æ ¼å¼.jpg)

â€‹	eslint åŠ è½½çš„ä¼˜å…ˆçº§æ˜¯ ï¼š js > yaml > jsonï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€å¥½é€‰æ‹© **jsæ ¼å¼**

**JSæ ¼å¼ä½¿ç”¨æ¨¡å¼**

- æˆ‘ä»¬æ³¨æ„åˆ° é…ç½®æ–‡ä»¶å†…éƒ¨ä½¿ç”¨çš„ **module.exports** å¯¼å‡ºé…ç½®æ•°æ®
- è¿™æ˜¯å› ä¸º æˆ‘ä»¬åœ¨å‰é¢ æ·»åŠ é…ç½®æ–‡ä»¶æ—¶ï¼Œé€‰æ‹©äº† `CommonJS`

![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/æ¨¡å—.jpg)

å¦‚æœé€‰æ‹©äº† `JavaScript modules`ï¼Œé‚£ä¹ˆå°±ä¼šæ˜¯ä½¿ç”¨ **export** å¯¼å‡ºé…ç½®æ•°æ®

æ¨èï¼š`CommonJS`

- ç”±äºæˆ‘ä»¬å¼€å‘æ—¶ï¼Œä¸€èˆ¬ä½¿ç”¨çš„æ˜¯ vueè„šæ‰‹æ¶ï¼Œå†…éƒ¨webpackæ‰“åŒ…é»˜è®¤ç”¨çš„æ˜¯CommonJS
- æ‰€ä»¥ ESLlinté…ç½®æ–‡ä»¶ åº”å°½å¯èƒ½ä¸å®ƒä¿æŒä¸€è‡´



**envèŠ‚ç‚¹**

```js
"env": {
    "browser": true,
    "commonjs": true,
    "es2021": true
}
```

- ç”±äº ESLint çš„å„ç§è§„èŒƒä¸­ï¼Œä¸€èˆ¬éƒ½ä¸å…è®¸ä½¿ç”¨æœªåœ¨é¡µé¢å†…å£°æ˜çš„æˆå‘˜
- è€Œå¼€å‘ä¸­ç»å¸¸ä¼šç”¨åˆ° ä¸€äº›è¿è¡Œç¯å¢ƒè‡ªå¸¦çš„ apiï¼Œå¦‚ï¼š
  - æµè§ˆå™¨ä¸­çš„ **window/document** ç­‰
  - nodejsä¸­çš„**__dirname** ç­‰
  - es2021ä¸­çš„ **WeakRef** ç­‰
- æ‰€ä»¥è¦å‘Šè¯‰eslintï¼Œå½“å‰ä»£ç æ˜¯è¿è¡Œåœ¨å“ªäº›ç¯å¢ƒä¸­ï¼Œè¿™æ ·æ£€æŸ¥æ—¶å°±ä¸ä¼šæŠ¥é”™äº†



**globalsèŠ‚ç‚¹**

- å½“è®¿é—®å½“å‰æºæ–‡ä»¶å†…æœªå®šä¹‰çš„å˜é‡æ—¶ï¼Œ[no-undef](https://link.juejin.cn?target=https%3A%2F%2Feslint.bootcss.com%2Fdocs%2Frules%2Fno-undef) è§„åˆ™å°†å‘å‡ºè­¦å‘Šã€‚å¦‚æœä½ æƒ³åœ¨ä¸€ä¸ªæºæ–‡ä»¶é‡Œä½¿ç”¨å…¨å±€å˜é‡ï¼Œæ¨èä½ åœ¨ ESLint ä¸­å®šä¹‰è¿™äº›å…¨å±€å˜é‡ï¼Œè¿™æ · ESLint å°±ä¸ä¼šå‘å‡ºè­¦å‘Šäº†ã€‚ä½ å¯ä»¥ä½¿ç”¨æ³¨é‡Šæˆ–åœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰å…¨å±€å˜é‡ã€‚

```js
 "globals": {
  "_": true  // å¯ä»¥è¯»å–ï¼Œå¯ä»¥ä¿®æ”¹
  "$": false // å¯ä»¥è¯»å–ï¼Œä¸èƒ½ä¿®æ”¹
 }
```

- ä¹Ÿå¯ä»¥ä½¿ç”¨ `globals` èŠ‚ç‚¹æ¥æ‰‹åŠ¨é…ç½®å…¨å±€æˆå‘˜
- æ³¨æ„ï¼šè¿™ä¸ªèŠ‚ç‚¹éœ€è¦æ‰‹åŠ¨æ·»åŠ ï¼Œé»˜è®¤æ˜¯æ²¡æœ‰çš„



**æ’ä»¶ï¼ˆpluginsï¼‰**

```json
"plugins": ["standard","promise","react"],
```



**extends èŠ‚ç‚¹**

```js
"extends": [
  "standard" // "eslint-config-standard"
 ]
```

- ESLint æ£€æŸ¥æ—¶ç”¨å“ªäº›è§„èŒƒå‘¢ï¼Ÿé€šè¿‡è¿™ä¸ªèŠ‚ç‚¹å¯ä»¥é…ç½®ä½¿ç”¨ å†…ç½®è§„èŒƒ è¿˜æ˜¯ ç¬¬ä¸‰æ–¹è§„èŒƒ
  - è¿™é‡Œé…ç½®çš„æ˜¯ ä½¿ç”¨ ç¬¬ä¸‰æ–¹ä¸‹è½½çš„ `eslint-config-standard` è§„èŒƒ
  - æ³¨æ„ï¼šé…ç½® extendsæ—¶ï¼Œå¯ä»¥çœç•¥ `eslint-config-`ï¼Œç›´æ¥å†™æˆ `standard`



**è§£æå™¨ï¼ˆparserï¼‰**

é»˜è®¤æƒ…å†µä¸‹ESLintä½¿ç”¨Espreeè§£æå™¨ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹å®ƒçš„é»˜è®¤è®¾ç½®ã€‚

```python
parser": "babel-eslint",

parser: '@typescript-eslint/parser',
```



**parserOptions èŠ‚ç‚¹**

```js
"parserOptions": {
	"ecmaVersion": 6, //ESçš„ç‰ˆæœ¬ï¼Œé»˜è®¤ä¸º5
	"sourceType": "module", //æŒ‡å®šæºä»£ç å­˜åœ¨çš„ä½ç½®ï¼Œscript | moduleï¼Œé»˜è®¤ä¸ºscriptã€‚
	"ecmaFeatures": { //æŒ‡å®šè¦ä½¿ç”¨å…¶ä»–é‚£äº›è¯­è¨€å¯¹è±¡
		"experimentalObjectRestSpread": true,//å¯ç”¨å¯¹å¯¹è±¡çš„æ‰©å±•
		"jsx": true, //å¯ç”¨jsxè¯­æ³•
		"globalReturn":true, //å…è®¸returnåœ¨å…¨å±€ä½¿ç”¨
		"impliedStrict":true //å¯ç”¨ä¸¥æ ¼æ ¡éªŒæ¨¡å¼
	}
}
```

- ESLint è§£æå™¨ è§£æä»£ç æ—¶ï¼Œå¯ä»¥æŒ‡å®š ç”¨å“ªä¸ª js çš„ç‰ˆæœ¬
- æ³¨æ„ï¼šè¿™é‡Œæ˜¯æŒ‡å®š æ£€æŸ¥æ—¶æŒ‰ç…§å“ªä¸ªjsç‰ˆæœ¬è¯­æ³•æ£€æŸ¥ï¼Œä½†è¿™é‡Œä¸åŒ…å« å…¨å±€å˜é‡
- å…¨å±€å˜é‡ éœ€è¦é€šè¿‡ å‰é¢çš„ `env` èŠ‚ç‚¹é…ç½®



**rules èŠ‚ç‚¹**

```js
 "rules": {
 }
```

- ä¸¤ä¸ªç”¨æ³•ï¼š

  - ä¸ä½¿ç”¨ `extend` èŠ‚ç‚¹ é…ç½® **æ•´å¥—çš„è§„èŒƒ**ï¼Œè€Œæ˜¯åœ¨ `rules`èŠ‚ç‚¹ä¸­ç›´æ¥é…ç½®

    ![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/rules.jpg)

  - ä½¿ç”¨ `extend` èŠ‚ç‚¹ é…ç½® **æ•´å¥—çš„è§„èŒƒ**ï¼Œåœ¨ `rules`èŠ‚ç‚¹ä¸­ä¿®æ”¹éƒ¨åˆ†è§„èŒƒçš„é…ç½® egï¼š

    ![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/rules2.jpg)

 **è§„åˆ™çš„é”™è¯¯ç­‰çº§æœ‰ä¸‰ç§ï¼š**

- "off" æˆ–è€… 0ï¼šå…³é—­è§„åˆ™ã€‚
- "warn" æˆ–è€… 1ï¼šæ‰“å¼€è§„åˆ™ï¼Œå¹¶ä¸”ä½œä¸ºä¸€ä¸ªè­¦å‘Šï¼ˆä¸å½±å“exit codeï¼‰ã€‚
- "error" æˆ–è€… 2ï¼šæ‰“å¼€è§„åˆ™ï¼Œå¹¶ä¸”ä½œä¸ºä¸€ä¸ªé”™è¯¯ï¼ˆexit codeå°†ä¼šæ˜¯1ï¼‰ã€‚

ä¾‹å­ï¼š

```
{
    "rules": {
        "eqeqeq": "off",
        "curly": "error",
        "quotes": ["error", "double"]
    }
}
```



### ESLinté…ç½®æ–‡ä»¶ï¼š`extends` å’Œ `plugins` çš„åŒºåˆ«â­

é€šå¸¸ EsLint ä¸­é»˜è®¤æä¾›äº†ä¸€ç³»åˆ—å†…ç½®çš„ Rules è§„åˆ™æä¾›ç»™æˆ‘ä»¬è¿›è¡Œé…ç½®ï¼Œä»è€Œæ£€æµ‹æˆ‘ä»¬çš„ JavaScript ä»£ç ã€‚

ä½†æ˜¯åœ¨æŸäº›ç‰¹å®šæ¡ä»¶ä¸‹ï¼Œå†…ç½®çš„ä¸€äº›è§„åˆ™å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„ä»£ç æ£€æŸ¥ã€‚

æ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬å°±è¦åŸºäºè¯¥æƒ…å†µåšä¸€äº›ç‰¹æ®Šçš„æ‹“å±•äº†ï¼ŒPlugin çš„ä½œç”¨æ­£æ˜¯å¤„ç†è¿™äº›åŠŸèƒ½è€Œç”Ÿã€‚

æ¯”å¦‚ï¼Œé€šå¸¸åœ¨æˆ‘ä»¬ä½¿ç”¨ Eslint æ¥æ£€æŸ¥æˆ‘ä»¬çš„ä»£ç æ—¶ï¼Œéœ€è¦å°†è§£æå™¨æ›¿æ¢ä¸º `@typescript-eslint/parser` çš„åŒæ—¶é’ˆå¯¹äºä¸€äº› TypeScript ç‰¹å®šè¯­æ³•æˆ‘ä»¬è¿˜éœ€è¦ä½¿ç”¨ `@typescript-eslint/eslint-plugin` æ¥æ”¯æŒä¸€äº›ç‰¹å®šçš„ TS è¯­æ³•æ£€æŸ¥ã€‚

è¿™é‡Œæˆ‘ä»¬é¢å¤–å®‰è£…çš„ ` @typescript-eslint/eslint-plugin` ä¸­å°±åŒ…å«äº†ä¸€ç³»åˆ—æœ‰å…³äº TS æ–‡ä»¶æ£€æµ‹çš„ç‰¹æ®Šè§„åˆ™ã€‚

åœ¨ EsLint å†…éƒ¨å¹¶ä¸æ”¯æŒæœ‰å…³äº Ts çš„ä¸€äº›è¯­æ³•ï¼Œè‡ªç„¶æˆ‘ä»¬éœ€è¦é€šè¿‡ Plugin æ¥æ‹“å±•å¯¹åº”çš„æ£€æµ‹è§„åˆ™ã€‚

å¦‚æœè¯´ä¸Šè¿° Plugins å’Œ Rules å¯ä»¥æ»¡è¶³é¡¹ç›®çš„ Lint é…ç½®çš„è¯ï¼Œé‚£ä¹ˆ Extends å…³é”®å­—å¯ä»¥ç†è§£ä¸ºå…³äº Plugins å’Œ Rules ç»“åˆè€Œæ¥çš„æœ€ä½³å®è·µã€‚

æ­£å¦‚å…¶åï¼ŒExtends è¡¨ç¤ºç»§æ‰¿çš„æ„æ€ã€‚é€šå¸¸åœ¨ä¸åŒçš„é¡¹ç›®ä¸­ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹éƒ½å…·æœ‰ç›¸åŒçš„ Lint ç›¸å…³é…ç½®ã€‚

åŸºäºè¿™ç§æƒ…å†µ EsLint æä¾›äº† Extends å…³é”®å­—æ¥è§£å†³ä¸åŒé¡¹ç›®ä¸‹å­˜åœ¨çš„é€šç”¨é…ç½®ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ EsLint ä¸­çš„ Extends å…³é”®å­—æ¥ç»§æ‰¿ä¸€äº›é€šç”¨çš„é…ç½®ã€‚

æ¯”å¦‚ï¼ŒEsLint å®˜æ–¹æä¾›äº† `eslint:recommended` è§„åˆ™ï¼Œå½“æˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­ç»§æ‰¿ `"eslint:recommended"` æ—¶ï¼Œç›¸å½“äºå¯ç”¨äº†ä¸€ç³»åˆ—æ ¸å¿ƒè§„åˆ™ï¼Œè¿™äº›è§„åˆ™ä¼šè¢« EsLint å®˜æ–¹ç»´æŠ¤åœ¨ `"eslint:recommended"` ä¸­å®šæœŸæ›´æ–°ï¼š

```js
// .eslintrc.js
module.exports = {
  root: true,
  parser: 'espress',
  parserOptions: {
    ecmaVersion: 6,
  },
  extends: ['eslint:recommended'],
};

// index.js
const a = 'hello world'; // error: 'a' is assigned a value but never used.eslintno-unused-vars
```

ä¸Šè¿°çš„ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ²¡æœ‰å®šä¹‰ä»»ä½• rules ä»¥åŠ plugins ã€‚ä»…ä»…æ˜¯ ` extends: ['eslint:recommended']`ã€‚

æ­¤æ—¶æˆ‘ä»¬åœ¨ `index.js` ä¸­å®šä¹‰äº† a å˜é‡ä½†ä¸ºä½¿ç”¨ï¼ŒEsLint ä¼šä¸ºæˆ‘ä»¬æ£€æµ‹å‡ºé”™è¯¯ `'a' is assigned a value but never used.eslintno-unused-vars`ã€‚

**å…¶å®ï¼Œ`extends` çš„ä½œç”¨ç®€å•æ¥è¯´å°±æ˜¯åœ¨é¡¹ç›®å†…ç»§æ‰¿äºå¦ä¸€ä»½ EsLint é…ç½®æ–‡ä»¶è€Œå·²ã€‚**

Extends ç»§æ‰¿å…³é”®å­—å­˜åœ¨ä¸‰ç§å†™æ³•ï¼ˆæƒ…å†µï¼‰ï¼š

- ä» EsLint æœ¬èº«çš„è§„åˆ™è¿›è¡Œç»§æ‰¿ï¼Œæ¯”å¦‚ ` extends: ['eslint:recommended']`
- ä»ç¬¬ä¸‰æ–¹çš„ NPM åŒ…è§„åˆ™è¿›è¡Œç»§æ‰¿ï¼Œæ¯”å¦‚ `extends : ['eslint-config-airbnb']`
- ä» ESLint çš„æ’ä»¶è¿›è¡Œç»§æ‰¿ï¼Œæ¯”å¦‚ `extends: ['plugin:react/recommended']`
- ä»ç»å¯¹è·¯å¾„ç»§æ‰¿è€Œæ¥ï¼Œæ¯”å¦‚ `extends: ["./node_modules/coding-standard/eslintDefaults.js"]`

```js
// .eslintrc.js
module.exports = {
   "extends": [
     // ç›´æ¥ä» EsLint æœ¬èº«é›†æˆçš„è§„åˆ™ç»§æ‰¿
     "eslint:recommended",
    // ä»ä¸€äº›ç¬¬ä¸‰æ–¹NPMåŒ…è¿›è¡Œç»§æ‰¿ï¼Œæ¯”å¦‚ eslint-config-standardã€eslint-config-airbnb 
    // eslint-config-* ä¸­ eslint-config- å¯ä»¥çœç•¥ 
     "airbnb",
     // ç›´æ¥ä»æ’ä»¶ç»§æ‰¿è§„åˆ™ï¼Œå¯ä»¥çœç•¥åŒ…åä¸­çš„ `eslint-plugin`
     // é€šå¸¸æ ¼å¼ä¸º `plugin:${pluginName}/${configName}`
     "plugin:@typescript-eslint/recommended",     
   ]
}
```









### ESLintæ£€æŸ¥è¯­æ³•çš„è§„åˆ™åŸç†

è¿è¡ŒESLint

- ä½¿ç”¨ eslint æ£€æŸ¥ ç›®æ ‡ æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹
- æ³¨æ„ï¼šESLint é»˜è®¤åªæ£€æŸ¥ js æ–‡ä»¶ä»£ç ï¼Œå¦‚æœæƒ³ æ£€æŸ¥ vue æˆ– reactæ–‡ä»¶ï¼Œéœ€è¦è£…å…¶å®ƒæ’ä»¶åŒ…

```js
npx eslint ./index.js // æ£€æŸ¥ ç›®æ ‡æ–‡ä»¶
npx eslint ./src // æ£€æŸ¥ ç›®æ ‡æ–‡ä»¶å¤¹ ä¸­æ‰€æœ‰jsæ–‡ä»¶
```



**ESLintè¯­æ³•è§„èŒƒæœ¬è´¨**

- å°±æ˜¯**å‡½æ•°**
- æˆ‘ä»¬å¯ä»¥é€šè¿‡ çœ‹ **ESLint** æºç æŸ¥çœ‹ï¼š
  - eslint å†…ç½®285ä¸ªè§„åˆ™ï¼Œæ¯æ¡è§„åˆ™ éƒ½æ˜¯ä¸€ä¸ª **createå‡½æ•°**
  - åœ¨è¿›è¡Œè¯­æ³•æ£€æŸ¥æ—¶ï¼Œä¼šå°†ä»£ç è½¬æˆå¦ä¸€ç§



### è¯­æ³•è§„èŒƒåŒ…ç±»å‹

- å‰é¢çœ‹åˆ°ï¼ŒESLint å®‰è£…æ—¶è‡ªå¸¦280å¤šä¸ªè§„èŒƒï¼Œè€Œå¼€å‘æ—¶ï¼Œæœªå¿…éƒ½è¦ä½¿ç”¨ï¼Œå„ä¸ªå…¬å¸æ ¹æ®è‡ªå·±çš„ä¹ æƒ¯é€‰æ‹©

- æ‰€ä»¥å°±ç”¨äº†ä¸åŒçš„é€‰æ‹©ç»„åˆï¼š

  a. **ESLintå†…ç½®è§„èŒƒåŒ…** ï¼šeslint-all / eslint-recommended

  b. **æ ‡å‡†è§„èŒƒåŒ…**ï¼šeslint-config-standard

  c. **ç¬¬ä¸‰æ–¹è§„èŒƒåŒ…**(google/airbnb/facebook....)

**å†…ç½®è§„èŒƒåŒ…**

- å·²ç»éšeslintä¸€èµ·ä¸‹è½½ï¼š

  `eslint-all` ï¼šä½¿ç”¨å…¨éƒ¨280å¤šä¸ªè§„åˆ™

  `eslint-recommended`ï¼šåªä½¿ç”¨æ¨èçš„60ä¸ªè§„åˆ™

**æ ‡å‡†è§„èŒƒåŒ…(éœ€è¦ä¸‹è½½)**

- åŒ…åï¼š`eslint-config-standard`ä¹Ÿä½¿ç”¨äº†200å¤šä¸ªè§„åˆ™

- ä¸‹è½½æ–¹å¼ï¼š

  - å¯ä»¥åœ¨å‰é¢åˆ›å»º eslinté…ç½®æ–‡ä»¶æ—¶ é€‰æ‹©ä¸‹è½½

    ![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/è§„èŒƒåŒ….jpg)

  - æ‰‹åŠ¨ä¸‹è½½ï¼Œå®˜æ–¹gitåœ°å€ï¼š[github.com/standard/stâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fstandard%2Fstandard)

    - ä¸‹è½½åŒ…ï¼š`npm i eslint-config-standard -D`

    - é™ä½eslintç‰ˆæœ¬ï¼š`npm i eslint@7.32.0` ï¼ˆstandardä¾èµ–ä½ç‰ˆæœ¬çš„eslintï¼‰

    - ä¿®æ”¹eslinté…ç½®æ–‡ä»¶ä¸­çš„ esç‰ˆæœ¬ï¼š

      ![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/æ‰‹åŠ¨ä¸‹è½½.jpg)



**ç¬¬ä¸‰æ–¹è§„èŒƒåŒ…**

> æœ‰å¾ˆå¤šå•Šï¼Œæˆ‘ä»¬å°±æ‹¿æœ€æµè¡Œçš„ airbnb æ¥ä¸¾ä¾‹

- åŒ…åï¼š`eslint-config-airbnb-base` ï¼šå¥½å¤šè§„åˆ™ï¼Œæ•°ä¸è¿‡æ¥ã€‚ã€‚ã€‚

- å®˜æ–¹npmåœ°å€ï¼š[www.npmjs.com/package/eslâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Feslint-config-airbnb-base)

- æ‰‹åŠ¨ä¸‹è½½ï¼š 

  - æŸ¥çœ‹éœ€è¦ä¸‹è½½çš„åŒ…å’Œç‰ˆæœ¬  `npm info "eslint-config-airbnb-base@latest" peerDependencies`

    ![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/ç¬¬ä¸‰æ–¹åŒ….jpg)

  - ä¸‹è½½ ç›¸å…³åŒ… `npx install-peerdeps --dev eslint-config-airbnb-base`

    ![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/ç¬¬ä¸‰æ–¹åŒ…2.jpg)



æ€»ç»“ï¼šä¸¥æ ¼ç¨‹åº¦ **all > airbnb-base > standard > recommended**



### ESLintçš„å¿½ç•¥æ–‡ä»¶

> æˆ‘ä»¬çš„æ•´ä¸ªé¡¹ç›®ä¸­ï¼Œæœ‰ä¸€äº›æ–‡ä»¶æ˜¯ä¸éœ€è¦eslintè¿›è¡Œæ£€æŸ¥ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åˆ°å¿½ç•¥æ–‡ä»¶ã€‚

 åœ¨æˆ‘ä»¬çš„å·¥ç¨‹ç›®å½•ä¸­æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå‘½åä¸ºâ€œ`.eslintignore`â€ï¼ŒEslintä¼šè‡ªåŠ¨è¯†åˆ«è¿™ä¸ªæ–‡ä»¶ã€‚

è¿™ä¸ªé…ç½®æ–‡ä»¶é‡Œé¢ï¼Œæ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªglobæ¨¡å¼è¯­å¥ï¼Œå…·ä½“æ ¼å¼å¦‚ä¸‹ï¼š 

- ä»¥ # å¼€å¤´çš„è¡Œè¢«å½“ä½œæ³¨é‡Šï¼Œä¸å½±å“å¿½ç•¥æ¨¡å¼ã€‚
- è·¯å¾„æ˜¯ç›¸å¯¹äº .eslintignore çš„ä½ç½®æˆ–å½“å‰å·¥ä½œç›®å½•ã€‚è¿™ä¹Ÿä¼šå½±å“é€šè¿‡ --ignore-patternä¼ é€’çš„è·¯å¾„ã€‚ 
- å¿½ç•¥æ¨¡å¼åŒ .gitignore è§„èŒƒ
- ä»¥ ! å¼€å¤´çš„è¡Œæ˜¯å¦å®šæ¨¡å¼ï¼Œå®ƒå°†ä¼šé‡æ–°åŒ…å«ä¸€ä¸ªä¹‹å‰è¢«å¿½ç•¥çš„æ¨¡å¼ã€‚

 .eslintignoreå½“ ESLint åœ¨ç›®å½•ä¸Šè¿è¡Œæ—¶ï¼ŒESLint æ”¯æŒæ–‡ä»¶ä»linting è¿›ç¨‹ä¸­æ’é™¤æ–‡ä»¶ã€‚ä½œä¸ºå•ç‹¬çš„ CLI å‚æ•°ç»™å‡ºçš„æ–‡ä»¶å°†å…é™¤æ’é™¤ã€‚è¯¥.eslintignoreæ–‡ä»¶æ˜¯ä¸€ä¸ªçº¯æ–‡æœ¬æ–‡ä»¶ï¼Œæ¯è¡ŒåŒ…å«ä¸€ä¸ªæ¨¡å¼ã€‚å®ƒå¯ä»¥ä½äºä»»ä½•ç›®æ ‡ç›®å½•çš„ç¥–å…ˆä¸­; å®ƒä¼šå½±å“å…¶åŒ…å«ç›®å½•ä¸­çš„æ–‡ä»¶ä»¥åŠæ‰€æœ‰å­ç›®å½•ã€‚

```
node_modules/* 

**/vendor/*.js 
```





## Prettier

### ä½œç”¨

Prettierï¼ˆç›´è¯‘è¿‡æ¥å°±æ˜¯"æ›´æ¼‚äº®çš„"ğŸ˜‚ï¼‰

Prettieræ˜¯ä¸€ä¸ªèƒ½å¤Ÿå®Œå…¨ç»Ÿä¸€ä½ å’ŒåŒäº‹ä»£ç é£æ ¼çš„åˆ©å™¨.

ä¸€èˆ¬æ˜¯ESLint ä¸ Prettieré…åˆä½¿ç”¨ï¼š

- ESLint ä¸»è¦è´Ÿè´£å¤„ç†ä¸¤ç§è§„åˆ™ï¼šæ ¼å¼åŒ–å’Œä»£ç è´¨é‡é—®é¢˜ã€‚æ ¼å¼åŒ–ä¸æ˜¯å®ƒçš„å¼ºé¡¹ï¼Œéœ€è¦ç”¨ Prettier æ ¼å¼åŒ–å¤§å¸ˆæ¥å¤„ç†ä»£ç é£æ ¼æœ‰é—®é¢˜çš„ä»£ç ã€‚

- Prettier æ ¼å¼åŒ–åçš„ä»£ç ï¼Œç†è®ºä¸Šæ˜¯æœ€å¥½çœ‹çš„ã€‚æ­£å› ä¸º Prettier åªå…³æ³¨æ ¼å¼åŒ–ï¼Œæ‰€ä»¥å®ƒä¹Ÿå¯ä»¥æ ¼å¼åŒ–å…¶å®ƒçš„æ–‡ä»¶ï¼Œå¦‚ `.yml`, `.json`, `.md` ç­‰ã€‚



### ä½¿ç”¨

å…ˆå®‰è£…ä¾èµ–ï¼š

```sh
npm i -D prettier # å®‰è£…ä¾èµ–
```

ä¸‹é¢å¯¹prettierè¿›è¡Œé…ç½®ï¼šä¸€å…±æœ‰ä¸‰ç§æ–¹å¼æ”¯æŒå¯¹Prettierè¿›è¡Œé…ç½®ï¼š

1. æ ¹ç›®å½•åˆ›å»º`.prettierrc.js`æ–‡ä»¶ï¼Œèƒ½å¤Ÿå†™å…¥YMLã€JSONçš„é…ç½®æ ¼å¼ï¼Œå¹¶ä¸”æ”¯æŒ`.yaml/.yml/.json/.js`åç¼€ï¼›
2. æ ¹ç›®å½•åˆ›å»º`.prettier.config.js `æ–‡ä»¶ï¼Œå¹¶å¯¹å¤–exportä¸€ä¸ªå¯¹è±¡ï¼›
3. åœ¨`package.json`ä¸­æ–°å»º`prettier`å±æ€§ã€‚

ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨`prettierrc.js`çš„æ–¹å¼å¯¹prettierè¿›è¡Œé…ç½®ï¼ŒåŒæ—¶è®²è§£ä¸‹å„ä¸ªé…ç½®çš„ä½œç”¨ã€‚

```
module.exports = {
  "printWidth": 80, //ä¸€è¡Œçš„å­—ç¬¦æ•°ï¼Œå¦‚æœè¶…è¿‡ä¼šè¿›è¡Œæ¢è¡Œï¼Œé»˜è®¤ä¸º80
  "tabWidth": 2, //ä¸€ä¸ªtabä»£è¡¨å‡ ä¸ªç©ºæ ¼æ•°ï¼Œé»˜è®¤ä¸º80
  "useTabs": false, //æ˜¯å¦ä½¿ç”¨tabè¿›è¡Œç¼©è¿›ï¼Œé»˜è®¤ä¸ºfalseï¼Œè¡¨ç¤ºç”¨ç©ºæ ¼è¿›è¡Œç¼©å‡
  "singleQuote": false, //å­—ç¬¦ä¸²æ˜¯å¦ä½¿ç”¨å•å¼•å·ï¼Œé»˜è®¤ä¸ºfalseï¼Œä½¿ç”¨åŒå¼•å·
  "semi": true, //è¡Œä½æ˜¯å¦ä½¿ç”¨åˆ†å·ï¼Œé»˜è®¤ä¸ºtrue
  "trailingComma": "none", //æ˜¯å¦ä½¿ç”¨å°¾é€—å·ï¼Œæœ‰ä¸‰ä¸ªå¯é€‰å€¼"<none|es5|all>"
  "bracketSpacing": true, //å¯¹è±¡å¤§æ‹¬å·ç›´æ¥æ˜¯å¦æœ‰ç©ºæ ¼ï¼Œé»˜è®¤ä¸ºtrueï¼Œæ•ˆæœï¼š{ foo: bar }
  "parser": "babylon" //ä»£ç çš„è§£æå¼•æ“ï¼Œé»˜è®¤ä¸ºbabylonï¼Œä¸babelç›¸åŒã€‚
}
```

æˆ–è€…æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º`.prettierrc`æ–‡ä»¶ï¼š

```
{
  "useTabs": false,
  "tabWidth": 2,
  "printWidth": 80,
  "singleQuote": true,
  "trailingComma": "none",
  "semi": false
}
```



åˆ›å»º`.prettierignore`å¿½ç•¥æ–‡ä»¶

```
/dist/*
.local
.output.js
/node_modules/**

**/*.svg
**/*.sh

/public/*
```

ä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é›†æˆ `vscode-prettier`è¿™ä¸ªæ’ä»¶æ¥å®Œæˆè‡ªåŠ¨ä¿å­˜æ ¼å¼åŒ–ï¼Œåœ¨æ’ä»¶å¸‚åœºå®‰è£…å¥½äº†ä»¥åï¼Œåœ¨æˆ‘ä»¬çš„`.vscode/settings.json`ä¸­æ·»åŠ å¦‚ä¸‹è§„åˆ™

```json
{
   "editor.formatOnSave": true, // å¼€å¯è‡ªåŠ¨ä¿å­˜
   "editor.defaultFormatter": "esbenp.prettier-vscode", // é»˜è®¤æ ¼å¼åŒ–å·¥å…·é€‰æ‹©prettier
}
```

è¿™æ ·ä¸€æ¥ï¼Œå½“æˆ‘ä»¬åœ¨vscodeå†™ä»£ç çš„æ—¶å€™ï¼Œä¾¿ä¼šè‡ªåŠ¨æ ¼å¼åŒ–äº†ã€‚





## eslintå’Œprettieré…åˆä½¿ç”¨

### ä¸ºä»€ä¹ˆè¦é…åˆä½¿ç”¨

ä¸ºä»€ä¹ˆè¦ä¸¤è€…é…åˆä½¿ç”¨ï¼Ÿå› ä¸ºï¼Œç¬¬ä¸€åœ¨ ESLint æ¨å‡º --fix å‚æ•°å‰ï¼ŒESLint å¹¶æ²¡æœ‰è‡ªåŠ¨åŒ–æ ¼å¼ä»£ç çš„åŠŸèƒ½ï¼Œè¦å¯¹ä¸€äº›æ ¼å¼é—®é¢˜åšæ‰¹é‡æ ¼å¼åŒ–åªèƒ½ç”¨ Prettier è¿™æ ·çš„å·¥å…·ã€‚ç¬¬äºŒ ESLint çš„è§„åˆ™å¹¶ä¸èƒ½å®Œå…¨åŒ…å« Prettier çš„è§„åˆ™ï¼Œä¸¤è€…ä¸æ˜¯ç®€å•çš„è°æ›¿ä»£è°çš„é—®é¢˜ã€‚ä½†æ˜¯åœ¨ ESLint æ¨å‡º --fix å‘½ä»¤è¡Œå‚æ•°ä¹‹åï¼Œå¦‚æœä½ è§‰å¾— ESLint æä¾›çš„æ ¼å¼åŒ–ä»£ç å¤Ÿç”¨äº†ï¼Œä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ Prettierã€‚

> prettier æ˜¯æ“…é•¿ä»£ç æ ¼å¼çš„æ ¡éªŒï¼Œeslintæ“…é•¿ä»£ç è´¨é‡çš„æ ¡éªŒã€‚è™½è¯´ eslint ä¹Ÿèƒ½æ ¼å¼æ ¡éªŒï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ prettier é‚£ä¹ˆå¼ºåŠ¿ã€‚



ESLint å’Œ Prettier ç›¸äº’åˆä½œçš„æ—¶å€™æœ‰ä¸€äº›é—®é¢˜ï¼Œå¯¹äºä»–ä»¬äº¤é›†çš„éƒ¨åˆ†è§„åˆ™ï¼ŒESLint å’Œ Prettier æ ¼å¼åŒ–åçš„ä»£ç æ ¼å¼ä¸ä¸€è‡´ã€‚å¯¼è‡´çš„é—®é¢˜æ˜¯ï¼šå½“ä½ ç”¨ Prettier æ ¼å¼åŒ–ä»£ç åå†ç”¨ ESLint å»æ£€æµ‹ï¼Œä¼šå‡ºç°ä¸€äº›å› ä¸ºæ ¼å¼åŒ–å¯¼è‡´çš„ warningã€‚



### é…åˆä½¿ç”¨æ—¶åˆ°åº•è°çš„æ ¼å¼åŒ–åœ¨ç”Ÿæ•ˆï¼Ÿ

ESLint å’Œ Prettier ç›¸äº’åˆä½œçš„æ—¶å€™æœ‰ä¸€äº›é—®é¢˜ï¼Œå¯¹äºä»–ä»¬äº¤é›†çš„éƒ¨åˆ†è§„åˆ™ï¼ŒESLint å’Œ Prettier æ ¼å¼åŒ–åçš„ä»£ç æ ¼å¼ä¸ä¸€è‡´ã€‚å¯¼è‡´çš„é—®é¢˜æ˜¯ï¼šå½“ä½ ç”¨ Prettier æ ¼å¼åŒ–ä»£ç åå†ç”¨ ESLint å»æ£€æµ‹ï¼Œä¼šå‡ºç°ä¸€äº›å› ä¸ºæ ¼å¼åŒ–å¯¼è‡´çš„ warningã€‚è¿™ä¸ªæ—¶å€™æœ‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆï¼š

1.è¿è¡Œ Prettier ä¹‹åï¼Œå†ä½¿ç”¨ eslint --fix æ ¼å¼åŒ–ä¸€æŠŠï¼Œè¿™æ ·æŠŠå†²çªçš„éƒ¨åˆ†ä»¥ ESLint çš„æ ¼å¼ä¸ºæ ‡å‡†è¦†ç›–æ‰ï¼Œå‰©ä¸‹çš„ warning å°±éƒ½æ˜¯ä»£ç è´¨é‡é—®é¢˜äº†ã€‚

2.åœ¨é…ç½® ESLint çš„æ ¡éªŒè§„åˆ™æ—¶å€™æŠŠå’Œ Prettier å†²çªçš„è§„åˆ™ disable æ‰ï¼Œç„¶åå†ä½¿ç”¨ Prettier çš„è§„åˆ™ä½œä¸ºæ ¡éªŒè§„åˆ™ã€‚é‚£ä¹ˆä½¿ç”¨ Prettier æ ¼å¼åŒ–åï¼Œä½¿ç”¨ ESLint æ ¡éªŒå°±ä¸ä¼šå‡ºç°å¯¹å‰è€…çš„ warningã€‚

ä¸ºä»€ä¹ˆä¸èƒ½å…ˆä½¿ç”¨ ESLint å†ä½¿ç”¨ Prettierï¼Ÿ é’ˆå¯¹æ–¹æ¡ˆ1ï¼Œå¦‚æœä½ åä½¿ç”¨ Prettierï¼Œé‚£ä¹ˆæ ¼å¼åŒ–åæäº¤çš„ä»£ç åœ¨ä¸‹ä¸€æ¬¡æˆ–è€…åˆ«äºº checkout ä»£ç åæ˜¯é€šä¸è¿‡ lint æ ¡éªŒçš„ã€‚

é’ˆå¯¹æ–¹æ¡ˆ2ï¼Œå…¶å®æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æœ¬äººåœ¨å®è·µä¸­çœ‹ç¤¾åŒºæ–¹æ¡ˆçš„æ—¶å€™æœ‰æåˆ°æŸäº›æƒ…å†µä¸‹ eslint --fix å’Œ prettier æ··ç”¨ä¼šå‡ºç°æ ¼å¼é—®é¢˜ã€‚æ‰€ä»¥ä¿é™©èµ·è§è¿˜æ˜¯å…ˆç”¨ perttier æ ¼å¼åŒ–ï¼Œå†ç”¨ eslint å‘½ä»¤æ ¡éªŒï¼Œè€Œä¸ç”¨ eslint --fix å‘½ä»¤å»æ ¼å¼åŒ–ã€‚





### è§£å†³eslintå’Œprettierå†²çªçš„é—®é¢˜â­

åœ¨ç†æƒ³çš„çŠ¶æ€ä¸‹ï¼Œeslintä¸prettieråº”è¯¥å„å¸å…¶èŒã€‚eslintè´Ÿè´£æˆ‘ä»¬çš„ä»£ç è´¨é‡ï¼Œprettierè´Ÿè´£æˆ‘ä»¬çš„ä»£ç æ ¼å¼ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ä¼šå‘ç°ï¼Œç”±äºæˆ‘ä»¬å¼€å¯äº†è‡ªåŠ¨åŒ–çš„eslintä¿®å¤ä¸è‡ªåŠ¨åŒ–çš„æ ¹æ®prettieræ¥æ ¼å¼åŒ–ä»£ç ã€‚æ‰€ä»¥æˆ‘ä»¬å·²ä¿å­˜ä»£ç ï¼Œä¼šå‡ºç°å±å¹•é—ªä¸€èµ·ååˆæ¢å¤åˆ°äº†æŠ¥é”™çš„çŠ¶æ€ã€‚

è¿™å…¶ä¸­çš„æ ¹æœ¬åŸå› å°±æ˜¯eslintæœ‰éƒ¨åˆ†è§„åˆ™ä¸prettierå†²çªäº†ï¼Œæ‰€ä»¥ä¿å­˜çš„æ—¶å€™æ˜¾ç¤ºè¿è¡Œäº†eslintçš„ä¿®å¤å‘½ä»¤ï¼Œç„¶åå†è¿è¡Œprettieræ ¼å¼åŒ–ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç°å±å¹•é—ªä¸€ä¸‹ç„¶ååˆæ¢å¤åˆ°æŠ¥é”™çš„ç°è±¡ã€‚è¿™æ—¶å€™ä½ å¯ä»¥æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦å­˜åœ¨å†²çªçš„è§„åˆ™ã€‚

æŸ¥é˜…èµ„æ–™ä¼šå‘ç°ï¼Œç¤¾åŒºå·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªéå¸¸æˆç†Ÿçš„æ–¹æ¡ˆï¼Œå³eslint-config-prettier + eslint-plugin-prettierã€‚

å®‰è£…æ’ä»¶ï¼šï¼ˆvueåœ¨åˆ›å»ºé¡¹ç›®æ—¶ï¼Œå¦‚æœé€‰æ‹©prettierï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæ’ä»¶ä¼šè‡ªåŠ¨å®‰è£…ï¼‰

```
npm i eslint-plugin-prettier eslint-config-prettier -D
```

åœ¨ .eslintrc.jsonä¸­extendsçš„æœ€åæ·»åŠ ä¸€ä¸ªé…ç½®:

å…³é”®åœ¨äºæ–°å¢åŠ çš„ `plugin:prettier/recommended` è¿™ä¸ªè§„åˆ™

```
{ 
    extends: [
    'eslint:recommended',
    'plugin:vue/vue3-essential',
    'plugin:@typescript-eslint/recommended',
+    // æ–°å¢ï¼Œå¿…é¡»æ”¾åœ¨æœ€åé¢
+    'plugin:prettier/recommended' 
  ],
}

```

`eslint-plugin-prettier`æ’ä»¶ä¼šè°ƒç”¨prettierå¯¹ä½ çš„ä»£ç é£æ ¼è¿›è¡Œæ£€æŸ¥ï¼Œ**å…¶åŸç†æ˜¯å…ˆä½¿ç”¨prettierå¯¹ä½ çš„ä»£ç è¿›è¡Œæ ¼å¼åŒ–ï¼Œç„¶åä¸æ ¼å¼åŒ–ä¹‹å‰çš„ä»£ç è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœè¿‡å‡ºç°äº†ä¸ä¸€è‡´ï¼Œè¿™ä¸ªåœ°æ–¹å°±ä¼šè¢«prettierè¿›è¡Œæ ‡è®°,æœ€åeslintè‡ªåŠ¨fixæŒ‰ç…§prettierçš„è§„èŒƒä¿®å¤errorä»£ç **

```
// (é‡è¦)è¿™ä¸ªæ˜¯ä¸ºäº† eslint è·Ÿ prettier å¯ä»¥è”åˆä½¿ç”¨
npm install --save-dev eslint-plugin-prettier

// (é‡è¦)è¿™ä¸ªæ˜¯ä¸ºäº†è®© eslint è·Ÿ prettier å…¼å®¹ï¼Œå…³é—­ prettier è·Ÿ eslint å†²çªçš„rules
npm install --save-dev eslint-config-prettier
```

æœ€åå†æ¥è§£é‡Šä¸‹`plugin:prettier/recommended`çš„å«ä¹‰ï¼Œè¿™ä¸ªå…¶å®æ˜¯å¤šä¸ªeslintçš„é…ç½®é›†åˆï¼Œä¸€ä¸ªé…ç½®æå®šï¼Œé™ä½é…ç½®æˆæœ¬ï¼Œä¸‹é¢ä»£ç å°±æ˜¯å®é™…eslintçš„åŸå­é…ç½®ï¼š

```json
{
  "extends": ["prettier"],        // ç”Ÿæ•ˆ eslint-config-prettier å±è”½é…ç½®
  "plugins": ["prettier"],        // ç”Ÿæ•ˆ eslint-plugin-prettier æç¤ºé…ç½®
  "rules": {
    "prettier/prettier": "error",   // prettieræŠ¥é”™çš„çº§åˆ«ï¼Œçº¢è‰²æ³¢æµªçº¿
    "arrow-body-style": "off",      // å†²çªæ— æ³•è§£å†³ï¼Œç›´æ¥å…³é—­
    "prefer-arrow-callback": "off"  // å†²çªæ— æ³•è§£å†³ï¼Œç›´æ¥å…³é—­
  }
}
```







## æ·»åŠ  .editorconfig æ–‡ä»¶

`.editorconfig` é…ç½®æ–‡ä»¶ç”¨äºæŠ¹å¹³ä¸åŒç¼–è¾‘å™¨æˆ–ç³»ç»Ÿä¹‹é—´çš„ç¼–ç å·®å¼‚ï¼Œæ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ã€‚æœ€å¸¸è§çš„é…ç½®ä¹‹ä¸€æ˜¯ `end_of_line = lf`ï¼Œå¦‚æœç”¨ Windows å’Œ Mac æ··åˆå¼€å‘ï¼Œä¸ç»Ÿä¸€è¡Œå°¾ç¬¦ä¼šé€ æˆ eslint çˆ†çº¢ã€‚

ç”±äºä¸åŒå¼€å‘è€…çš„ç¼–è¾‘å™¨è®¾ç½®ä¸åŒï¼Œ æ•…åœ¨é¡¹ç›®ä¸­åº”å½“åŒ…å« .editorconfigï¼Œç”¨æ¥ç»Ÿä¸€é…ç½®ç¼–è¾‘å™¨çš„æ¢è¡Œã€ç¼©è¿›å­˜å‚¨æ ¼å¼ã€‚
 é…ç½®å‚è€ƒï¼š

```ini
# http://editorconfig.org
root = true

[*]
indent_style = space                    # è¾“å…¥çš„ tab éƒ½ç”¨ç©ºæ ¼ä»£æ›¿
indent_size = 2                         # ä¸€ä¸ª tab ç”¨ 2 ä¸ªç©ºæ ¼ä»£æ›¿
# end_of_line = lf                      # æ¢è¡Œç¬¦ä½¿ç”¨ unix çš„æ¢è¡Œç¬¦ \n
charset = utf-8                         # å­—ç¬¦ç¼–ç  utf-8
trim_trailing_whitespace = true         # å»æ‰æ¯è¡Œæœ«å°¾çš„ç©ºæ ¼
insert_final_newline = true             # æ¯ä¸ªæ–‡ä»¶æœ«å°¾éƒ½åŠ ä¸€ä¸ªç©ºè¡Œ

[*.md]
trim_trailing_whitespace = false        # .md æ–‡ä»¶ä¸å»æ‰æ¯è¡Œæœ«å°¾çš„ç©ºæ ¼
```



## ESlint nodeåŒ…è·ŸVScodeæ’ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«

nodeåŒ…æ˜¯é‡Œé¢çš„æ˜¯åœ¨ç¼–è¯‘æœŸç»™ä½ æŠ¥é”™ç”¨çš„ï¼ŒæŠ¥é”™äº†ä¼šåœæ­¢ç¼–è¯‘ï¼Œç›´åˆ°ä½ ä¿®å¤ã€‚ vscodeæ’ä»¶æ˜¯å¯è§†åŒ–æ’ä»¶ åœ¨ä½ ç¼–å†™ä»£ç æ—¶å€™å°±å¯ä»¥çœ‹åˆ°ä¸åˆè§„èŒƒçš„ä»£ç 



## vscodeç¯å¢ƒ

å› ä¸ºæˆ‘å¹³æ—¶å‰ç«¯å¼€å‘ç”¨çš„æ˜¯vscodeå±…å¤šï¼Œæ‰€ä»¥è¿™é‡Œæš‚æ—¶å°±ä»‹ç»vscodeçš„ç¯å¢ƒé…ç½®

åœ¨æ ¹ç›®å½•çš„`.vscode/settings.json`æ·»åŠ å¦‚ä¸‹ï¼š

```json
{
    "eslint.enable": true, //æ˜¯å¦å¼€å¯vscodeçš„eslint
    "eslint.alwaysShowStatus": true,//æ˜¯å¦åœ¨ä¿å­˜çš„æ—¶å€™è‡ªåŠ¨fix eslint 
    "eslint.options": { //æŒ‡å®švscodeçš„eslintæ‰€å¤„ç†çš„æ–‡ä»¶çš„åç¼€
        "extensions": [
            ".js",
          	".vue",
          	".ts",
          	".tsx"
        ]
    },
    "eslint.validate": [ //ç¡®å®šæ ¡éªŒå‡†åˆ™
        "javascript",
    ],
    "editor.codeActionsOnSave": {
        "source.fixAll.eslint": true
    }
}
```

å¹¶ä¸”ç¡®ä¿Vscodeå®‰è£…è¿‡ä¸‹é¢çš„æ’ä»¶ï¼š

- ESLint
- prettier

å¦‚æœå®‰è£…äº†prettieræ’ä»¶ï¼Œä¸‹é¢æ˜¯`.vscode/settings.json`ä¸­è¦åŠ ä¸Šçš„é…ç½®ï¼š

```json
{
    "editor.formatOnSave": true, //å¼€å¯è‡ªåŠ¨ä¿å­˜
    "editor.defaultFormatter": "esbenp.prettier-vscode", //é»˜è®¤æ ¼å¼åŒ–å·¥å…·é€‰æ‹©prettier
    "[javascript]": {
        "editor.defaultFormatter": "esbenp.prettier-vscode"
    }
}
```



ä»¥ååªè¦æŒ‰äº†ä¿å­˜å¿«æ·é”®ï¼Œå°±ä¼š**è‡ªåŠ¨æ ¼å¼åŒ–**ï¼Œä¸€æ­¥åˆ°ä½ã€‚





## ç”¨ESLintæ¥è§„èŒƒTypescriptä»£ç 

é¦–å…ˆå®‰è£…ä¾èµ–ï¼š

```bash
npm i -d eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin
```

è¿™ä¸‰ä¸ªä¾èµ–åˆ†åˆ«æ˜¯ï¼š

- eslint: ESLintçš„æ ¸å¿ƒä»£ç 
- @typescript-eslint/parserï¼šESLintçš„è§£æå™¨ï¼Œç”¨äºè§£ætypescriptï¼Œä»è€Œæ£€æŸ¥å’Œè§„èŒƒTypescriptä»£ç 
- @typescript-eslint/eslint-pluginï¼šè¿™æ˜¯ä¸€ä¸ªESLintæ’ä»¶ï¼ŒåŒ…å«äº†å„ç±»å®šä¹‰å¥½çš„æ£€æµ‹Typescriptä»£ç çš„è§„èŒƒ

å®‰è£…å¥½è¿™3ä¸ªä¾èµ–åŒ…ä¹‹åï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ–°å»º.eslintrc.jsæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸­å®šä¹‰äº†ESLintçš„åŸºç¡€é…ç½®ï¼Œä¸€ä¸ªæœ€ä¸ºç®€å•çš„é…ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š

```java
module.exports = {
		env:{                          //æŒ‡å®šä»£ç çš„è¿è¡Œç¯å¢ƒ
        browser: true,
        node: true,
    }  
    parser:  '@typescript-eslint/parser', //å®šä¹‰ESLintçš„è§£æå™¨
    extends: ['plugin:@typescript-eslint/recommended'],//å®šä¹‰æ–‡ä»¶ç»§æ‰¿çš„å­è§„èŒƒ
    plugins: ['@typescript-eslint'],//å®šä¹‰äº†è¯¥eslintæ–‡ä»¶æ‰€ä¾èµ–çš„æ’ä»¶
  	parserOptions: {
    	project: ["./tsconfig.json"], // å‘Šè¯‰ eslintï¼štsconfig åœ¨å“ª
  	},                             
}
```

- åœ¨tsé¡¹ç›®ä¸­å¿…é¡»æ‰§è¡Œè§£æå™¨ä¸º@typescript-eslint/parserï¼Œæ‰èƒ½æ­£ç¡®çš„æ£€æµ‹å’Œè§„èŒƒTSä»£ç 
- envç¯å¢ƒå˜é‡é…ç½®ï¼Œå½¢å¦‚consoleå±æ€§åªæœ‰åœ¨browserç¯å¢ƒä¸‹æ‰ä¼šå­˜åœ¨ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®æ”¯æŒbrowser,é‚£ä¹ˆå¯èƒ½æŠ¥console is undefinedçš„é”™è¯¯ã€‚



### æ­¤å¤„ä¸€ä¸ªå¸¸è§çš„bug

```text
Parsing error: "parserOptions.project" has been set for @typescript-eslint/parser.
```

**è¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºï¼šæ—¢ç„¶ä½ é»˜è®¤è§„å®š ESLint è¦ lint `.eslintrc.js`ï¼Œå¯æ˜¯ `tsconfig.json` é‡Œåˆæ²¡æœ‰ include è¿™ä¸ªæ–‡ä»¶ã€‚å¯¼è‡´ ESLint æƒ³ Lint `.eslintrc.js` çš„æ—¶å€™ï¼Œå‘ç°å®ƒåˆä¸åœ¨ Parser çš„ `tsconfig.json` åå•åˆ—è¡¨ä¸Šï¼Œå°±è’™é€¼äº†ã€‚**

æœ€ç®€å•çš„è§£å†³æ–¹æ³•å°±æ˜¯åœ¨åœ¨ `tsconfig.json` é‡Œ include ä¸€ä¸‹å°± OK äº†ï¼š

```json
{
  "compilerOptions": {...},
  "include": [".eslintrc.js", "src"],
  "exclude": ["node_modules"]
}
```

æˆ–è€…åœ¨ `.eslintignore` é‡Œæ·»åŠ è¯¥æ–‡ä»¶ï¼Œå°†å…¶å¿½ç•¥æ‰ï¼š

```text
# å¿½ç•¥ .eslintrc.js
.eslintrc.js
```

**ä½†æ˜¯è¿™ä¸¤éƒ½ä¸æ˜¯å¾ˆå¥½çš„è§£å†³æ–¹æ³•ï¼Œå› ä¸ºé™¤äº† `src` ç›®å½•ï¼Œæ­£å¸¸é¡¹ç›®ä¸­è¿˜ä¼šæœ‰å¾ˆå¤šå…¶å®ƒæ™®é€šçš„ `.js` æ–‡ä»¶ï¼Œæ¯”å¦‚ `.babelrc.js`, `webpack.config.js`, `start.js` ç­‰é…ç½®æ–‡ä»¶ã€‚æˆ‘ä»¬æ—¢æƒ³è¦ ESLint x Prettier æ ¼å¼åŒ–è¿™äº›æ–‡ä»¶ï¼Œä½†åˆä¸æƒ³å°†å®ƒä»¬æ”¾åˆ° `tsconfig.json` é‡Œåšç±»å‹æ£€æŸ¥ã€‚**

ESLint æ­£å¥½æä¾›äº†ä¸€ä¸ª `overrides` é…ç½®æ¥è§£å†³è¿™æ ·çš„é—®é¢˜ï¼š

```js
module.exports = {
  env: {
    // æ”¯æŒæµè§ˆå™¨ç¯å¢ƒ
    browser: true,
    // è¯†åˆ« ES çš„ä»£ç ï¼Œä½¿ç”¨ ECMAScript 2021 è‡ªåŠ¨è®¾ç½® ecmaVersion parser ä¸º 12ï¼Œ
    es2021: true,
    // Linter .eslintrc.js è‡ªå·±çš„æ—¶å€™è¦ç”¨ node ç¯å¢ƒ
    node: true,
  },
  extends: [
    "eslint:recommended",
    "plugin:prettier/recommended"
  ],
  overrides: [
    // å¤„ç† TS æ–‡ä»¶
    {
      files: ["**/*.{ts,tsx}", "**/*.{js,jsx}"], // åªå¤„ç† ts å’Œ js æ–‡ä»¶
      excludedFiles: [".eslintrc.js"], // è¿™é‡Œç¦ç”¨äº† .eslintrc.js çš„ç±»å‹æ£€æŸ¥
      parser: "@typescript-eslint/parser", // èƒ½çœ‹æ‡‚ TypeScript
      parserOptions: {
        project: ["./tsconfig.json"], // å‘Šè¯‰ eslintï¼štsconfig åœ¨å“ª
      },
      extends: [
        // typescript-eslint çš„æ¨èè§„åˆ™ï¼Œåªæ˜¯è¿™äº›æœ€ä½³è§„åˆ™éƒ½æ˜¯é’ˆå¯¹ TS çš„
        "plugin:@typescript-eslint/recommended",
        // tsconfig.json é‡Œ Type Checking çš„æ¨èè§„åˆ™
        "plugin:@typescript-eslint/recommended-requiring-type-checking",
      ],
      plugins: [
        // ä½¿ç”¨ typescript x eslint çš„æ’ä»¶
        "@typescript-eslint",
      ],
    },
  ],
}
```

ä¸Šé¢çš„é…ç½®æŠŠ TypeScript çš„ ESLint é…ç½®å½’ä¸ºä¸€ç±»ï¼Œå¹¶åªå¯¹ `"**/*.{ts,tsx}", "**/*.{js,jsx}"` è¿›è¡Œ Lint æ“ä½œï¼ŒåŒæ—¶å°† `.eslintrc.js` æ’é™¤æ‰ã€‚**è¿™æ ·ä¸€æ¥ï¼ŒESLint ä¸ä»…å¯ä»¥é’ˆå¯¹è¿™ç±»æ–‡ä»¶æ¥åš Linter æ£€æŸ¥ï¼Œå¼€å‘è€…ä¹Ÿä¸ç”¨æŠŠå†—ä½™çš„ `.js` æ–‡ä»¶æ”¾åˆ° `tsconfig.json` é‡Œäº†ã€‚**

åˆ°æ­¤ä¸ºæ­¢ï¼Œ ESLint x TypeScript å·²ç»å®Œæˆäº†ã€‚







## Tip:å‘½åè§„å¾‹

é€šè¿‡ä¸Šé¢çš„ ESLint x TypeScript é…ç½®ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç° ESLint çš„åˆä¸€å¤§è§„å¾‹ï¼š

- å½“ ESLint æ— æ³•è§£ææ–‡ä»¶æ—¶ï¼Œæ¯”å¦‚çœ‹ä¸æ‡‚æ–°è¯­æ³•æ—¶ï¼Œå°±å¯ä»¥æœç´¢ "ESLint xxx Parser" æ¥æ‰¾å¯¹åº”çš„ NPM åŒ…
- å½“ ESLint è¦ Lint ä¸€äº›é `.js` æ–‡ä»¶æ—¶ï¼Œå¯ä»¥æœç´¢ "ESLint xxx plugin" æ¥è§£å†³



## å¸¸ç”¨Plugin

### ESLint x Babel

ESLintå¯ä»¥é€šè¿‡ `env` æ¥è®¾å®š ESLint çš„é»˜è®¤ ECMAScript parser çš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥ ESLint å…¶å®æ˜¯è‡ªå¸¦æœ‰ parser çš„ï¼Œä½†æ˜¯å®ƒåªæ”¯æŒ [æœ€æ–°ç‰ˆçš„ ECMAScript æ ‡å‡†](https://github.com/eslint/eslint/blob/a675c89573836adaf108a932696b061946abf1e6/README.md#what-about-experimental-features)ã€‚

è€Œ JavaScript ä¾ç„¶åœ¨ä¸æ–­å‘å±•ï¼Œæ—¶ä¸æ—¶åˆå‡ºä¸€äº›æ–°çš„ API æˆ–è€…ææ¡ˆï¼Œå¯¹äºè¦å°é²œçš„å¼€å‘è€…ï¼ŒESLint çš„ Parser å°±è§£æä¸åŠ¨ `.js` äº†ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ [@babel/eslint-parser](https://www.npmjs.com/package/@babel/eslint-parser)ã€‚

```sh
npm i -D @babel/core @babel/eslint-parser
```

ç„¶åæ·»åŠ  `.babelrc.js`ï¼Œåœ¨é‡Œé¢å†™é¡¹ç›®çš„ babel è§„åˆ™ã€‚

ç„¶ååœ¨ `overrides` é‡Œæ–°å¢å¯¹ `.js` çš„å¤„ç†ï¼š

```js
module.exports = {
  env: {
    // æ”¯æŒæµè§ˆå™¨ç¯å¢ƒ
    browser: true,
    // è¯†åˆ« CommonJS
    node: true,
    // è¯†åˆ« ES çš„ä»£ç ï¼Œä½¿ç”¨ ECMAScript 2021 è‡ªåŠ¨è®¾ç½® ecmaVersion parser ä¸º 12ï¼Œ
    es2021: true,
  },
  extends: [
    "eslint:recommended", // eslint è‡ªå·±çš„æ¨èè§„åˆ™ï¼Œæœ€ä½³å®è·µæœ€å°é›†
    "plugin:prettier/recommended", // ç¦ç”¨ eslint å…³äºä»£ç çš„é£æ ¼çš„è§„åˆ™ï¼Œä½¿ç”¨ prettier çš„é£æ ¼
  ],
  overrides: [
    // å¤„ç† JS æ–‡ä»¶
    {
      files: ["**/*.{js,jsx}"], // åªå¤„ç† js å’Œ jsx æ–‡ä»¶
      parser: "@babel/eslint-parser", // ä½¿ç”¨ babel æ¥è§£æ js æ–‡ä»¶
      parserOptions: {
        sourceType: "module", // æ”¯æŒ import/export
        allowImportExportEverywhere: false,
        ecmaFeatures: {
          globalReturn: false,
        },
      },
    },
    // å¤„ç† TS æ–‡ä»¶
    {
      files: ["**/*.{ts,tsx}"], // åªå¤„ç† ts å’Œ js æ–‡ä»¶
      parser: "@typescript-eslint/parser", // èƒ½çœ‹æ‡‚ TypeScript
      parserOptions: {
        project: ["./tsconfig.json"], // å‘Šè¯‰ eslintï¼štsconfig åœ¨å“ª
      },
      extends: [
        // typescript-eslint çš„æ¨èè§„åˆ™ï¼Œåªæ˜¯è¿™äº›æœ€ä½³è§„åˆ™éƒ½æ˜¯é’ˆå¯¹ TS çš„
        "plugin:@typescript-eslint/recommended",
        // tsconfig.json é‡Œ Type Checking çš„æ¨èè§„åˆ™
        "plugin:@typescript-eslint/recommended-requiring-type-checking",
      ],
      plugins: [
        // ä½¿ç”¨ typescript x eslint çš„æ’ä»¶
        "@typescript-eslint",
      ],
    },
  ],
};
```





### ESLint x Vue

å®ƒåªéœ€è¦ä¸€ä¸ª [eslint-plugin-vue](https://eslint.vuejs.org/)ï¼š

```sh
npm i -D eslint-plugin-vue
```

æˆ‘ä»¬ä¾ç„¶å¯ä»¥åœ¨ `overrides` ä¸­æ–°å¢ä¸€æ¡åªé’ˆå¯¹ `.vue` æ–‡ä»¶çš„é…ç½®ï¼š

```json
overrides: [
  // å¤„ç† vue æ–‡ä»¶
  {
    files: ["**/*.vue"], // åªå¤„ç† vue æ–‡ä»¶
    extends: ["plugin:vue/vue3-recommended"], // ä½¿ç”¨ vue3 çš„æ¨èè§„åˆ™
  }
]
```

è¿™æ ·å°±å¯ä»¥å¯¹æ‰€æœ‰ `.vue` æ–‡ä»¶æ‰§è¡Œ `eslint '**/*.vue' --fix` äº†



## StyleLint

ESLint å†å¼ºå¤§ä¹Ÿåªæ˜¯ JavaScript å’Œ TypeScript çš„ Linterï¼Œå¯¹æ ·å¼æ–‡ä»¶ `.css`, `less`, `scss` åˆ™éœ€è¦ [StyleLint](https://stylelint.io/user-guide/configure/)ã€‚

å…ˆæ¥å®‰è£…ä¸€äº›å¿…è¦çš„ NPM åŒ…ï¼š

```sh
# StyleLint
npm i -D stylelint
# StyleLint çš„ Prettier æ’ä»¶ï¼Œç±»ä¼¼ eslint-plugin-prettier
npm i -D stylelint-prettier
# ç¦ç”¨ä¸ Prettier å†²çªçš„ StyleLint è§„åˆ™
npm i -D stylelint-config-prettier
# åŸºç¡€è§„åˆ™ï¼ˆå¯é€‰ï¼‰
npm i -D stylelint-config-standard
```

é…ç½® `.stylelintrc.js`ï¼š

```js
module.exports = {
  "plugins": ["stylelint-prettier"],
  "extends": [
    "stylelint-config-standard",
    "stylelint-config-prettier"
  ],
  "rules": {
    "prettier/prettier": true
  }
}
```



### StyleLint x Less

**ä¸è¿‡ï¼Œå½“è¦é…ç½® less æˆ–è€… scss è¿˜éœ€è¦ä¸€ç‚¹æ­¥éª¤ã€‚**

```sh
# StyleLint çš„ Less æ’ä»¶
npm i -D stylelint-less
# StyleLint çš„ Less è§„åˆ™
npm i -D stylelint-config-recommended-less 
# StyleLint å¤„ç† customSyntax
npm i -D postcss-less
```

ä¿®æ”¹é…ç½®ï¼š

```js
module.exports = {
  "plugins": ["stylelint-prettier"],
  "extends": [
    "stylelint-config-standard",
    "stylelint-config-recommended-less",
    "stylelint-config-prettier"
  ],
  "customSyntax": "postcss-less",
  "rules": {
    "prettier/prettier": true
  }
}
```



## Husky x LintStaged

### å¥½å¤„

å¯¹äºä¸ä½¿ç”¨vscodeçš„ï¼Œæˆ–è€…æ²¡æœ‰å®‰è£…eslintã€preitterä¸stylelintæ’ä»¶çš„åŒå­¦æ¥è¯´ï¼Œå°±ä¸èƒ½å®ç°åœ¨ä¿å­˜çš„æ—¶å€™è‡ªåŠ¨çš„å»ä¿®å¤ä¸å’Œæ ¼å¼åŒ–ä»£ç ã€‚

è¿™æ ·æäº¤åˆ°gitä»“åº“çš„ä»£ç è¿˜æ˜¯ä¸ç¬¦åˆè¦æ±‚çš„ã€‚å› æ­¤éœ€è¦å¼•å…¥å¼ºåˆ¶çš„æ‰‹æ®µæ¥ä¿è¯æäº¤åˆ°gitä»“åº“çš„ä»£ç æ—¶ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚çš„ã€‚

huskyæ˜¯ä¸€ä¸ªç”¨æ¥ç®¡ç†git hookçš„å·¥å…·ï¼Œgit hookå³åœ¨æˆ‘ä»¬ä½¿ç”¨gitæäº¤ä»£ç çš„è¿‡ç¨‹ä¸­ä¼šè§¦å‘çš„é’©å­ã€‚
è™½ç„¶æˆ‘ä»¬å·²ç»è¦æ±‚é¡¹ç›®ä½¿ç”¨eslintäº†ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯ç»„å‘˜æäº¤ä»£ç ä¹‹å‰éƒ½å°†eslintä¸­çš„é—®é¢˜è§£å†³æ‰äº†ï¼š

ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸Œæœ›ä¿è¯ä»£ç ä»“åº“ä¸­çš„ä»£ç éƒ½æ˜¯ç¬¦åˆeslintè§„èŒƒçš„ï¼›

é‚£ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨ç»„å‘˜æ‰§è¡Œ git commit å‘½ä»¤çš„æ—¶å€™å¯¹å…¶è¿›è¡Œæ ¡éªŒï¼Œå¦‚æœä¸ç¬¦åˆeslintè§„èŒƒï¼Œé‚£ä¹ˆè‡ªåŠ¨é€šè¿‡è§„èŒƒè¿›è¡Œä¿®å¤ï¼›

é‚£ä¹ˆå¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹å‘¢ï¼Ÿå¯ä»¥é€šè¿‡Huskyå·¥å…·ï¼š

huskyæ˜¯ä¸€ä¸ªgit hookå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è§¦å‘gitæäº¤çš„å„ä¸ªé˜¶æ®µï¼špre-commitã€commit-msgã€pre-push



### Husky é…ç½®

æ³¨æ„ï¼Œæ‰§è¡Œè¿™é‡Œçš„æ“ä½œçš„å‰ææ˜¯å·²ç»æ‰§è¡Œäº†`git init`å‘½ä»¤ï¼Œå¯èƒ½åœ¨è‡ªå·±å»ºç«‹æµ‹è¯•æ–‡ä»¶æ—¶å¿˜è®°æ‰§è¡Œ`git init`å‘½ä»¤ï¼Œå¯¼è‡´å‘½ä»¤æ‰§è¡Œå¤±è´¥ã€‚

```sh
# å®‰è£…å“ˆå£«å¥‡
npm install husky -D
# æ·»åŠ  prepare å‘½ä»¤
npm set-script prepare "husky install"
# prepare åˆ›å»º bash è„šæœ¬ï¼Œå®‰è£… git hooks
npm run prepare
# æ·»åŠ  pre-commit çš„ git hook è„šæœ¬
npx husky add .husky/pre-commit "npx eslint src --fix"
```

è¿è¡Œä¹‹åä¼šå‘ç°åœ¨ `./.husky/pre-commit` é‡Œçœ‹åˆ° `git commit` å‰ä¼šè¿è¡Œçš„è„šæœ¬ï¼š

```sh
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# git commit å‰å…ˆ eslint fix ä¸€æ³¢
npx eslint src --fix
```

**ä½†æ˜¯è¿™æ ·çš„å‘½ä»¤ä¼šè®©æ¯æ¬¡ commit å‰éƒ½æŠŠæ•´ä¸ª `src` éƒ½æ‰«æå¹¶ fix ä¸€æ¬¡ï¼Œé€Ÿåº¦å¤ªæ…¢äº†ï¼Œè€Œä¸”å¾ˆå®¹æ˜“æŠŠåˆ«äººçš„å±å±±ä¹Ÿ fix æ‰ï¼Œç„¶åæäº¤ä¸Šå»ã€‚**

æˆ‘ä»¬æ›´å¸Œæœ›åªé’ˆå¯¹æäº¤çš„æ–‡ä»¶è¿›è¡Œ Lint æ“ä½œã€‚



### LintStaged é…ç½®

```sh
# å®‰è£…
npm i -D lint-staged
```

ç„¶åæ·»åŠ  `.lintstagedrc.js` é…ç½®æ–‡ä»¶ï¼Œé‡Œé¢å¯¹æäº¤ä¸åŒçš„æ–‡ä»¶è¿›è¡Œ `eslint --fix` æ“ä½œã€‚

```js
module.exports = {
  '**/*.{ts,tsx,js,jsx}': [
    "eslint --cache --fix",
  ],
  "**/*.vue": [
    "eslint --cache --fix",
  ],
  "**/*.{css,less}": [
    "stylelint --cache --fix",
  ]
}
```

`lint-staged` é…ç½®çš„å«ä¹‰æ˜¯å¯¹æäº¤ä¸Šæ¥ä¸åŒç±»å‹çš„æ–‡ä»¶æ‰§è¡Œå¯¹åº”çš„ lint fix å‘½ä»¤ã€‚

æœ€ååœ¨åˆšåˆšåˆ›å»ºçš„ `./.husky/pre-commit` é‡Œæ”¹æˆæ‰§è¡Œ `lint-staged` å‘½ä»¤ï¼š

```bash
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

npx lint-staged
```

ä»¥åæ¯æ¬¡ commit å‰éƒ½ä¼šè·‘ä¸€æ¬¡ `lint-staged`ï¼Œè€Œ `lint-staged` åˆä¼šå¯¹æäº¤çš„æ–‡ä»¶è¿›è¡Œ ESLint Fixã€‚



## git commitè§„èŒƒ

### ä»£ç æäº¤é£æ ¼

é€šå¸¸æˆ‘ä»¬çš„git commitä¼šæŒ‰ç…§ç»Ÿä¸€çš„é£æ ¼æ¥æäº¤ï¼Œè¿™æ ·å¯ä»¥å¿«é€Ÿå®šä½æ¯æ¬¡æäº¤çš„å†…å®¹ï¼Œæ–¹ä¾¿ä¹‹åå¯¹ç‰ˆæœ¬è¿›è¡Œæ§åˆ¶ã€‚

![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/é£æ ¼.jpeg)

ä½†å…¶å®é‚£äº›ä¸€ä¸²é•¿é•¿çš„è‹±æ–‡æäº¤ä¿¡æ¯å¹¶ä¸æ˜¯æ¯æ¬¡éƒ½æ‰‹å†™ä¸Šå»ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå·¥å…·ï¼š`Commitizen`

Commitizen æ˜¯ä¸€ä¸ªå¸®åŠ©æˆ‘ä»¬ç¼–å†™è§„èŒƒ commit message çš„å·¥å…·ï¼›
1.å®‰è£…Commitizen

```
npm install commitizen -D
```



2.å®‰è£…cz-conventional-changelogï¼Œå¹¶ä¸”åˆå§‹åŒ–cz-conventional-changelogï¼š

```
npx commitizen init cz-conventional-changelog --save-dev --save-exact
```

è¿™ä¸ªå‘½ä»¤ä¼šå¸®åŠ©æˆ‘ä»¬å®‰è£…cz-conventional-changelogï¼š

![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/1.jpg)

å¹¶ä¸”åœ¨package.jsonä¸­è¿›è¡Œé…ç½®ï¼š

![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/2.jpeg)

**è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æäº¤ä»£ç éœ€è¦ä½¿ç”¨ `npx cz`ï¼šè€Œä¸æ˜¯ä½¿ç”¨ git commit -m "xxx"**

* ç¬¬ä¸€æ­¥æ˜¯é€‰æ‹©typeï¼Œæœ¬æ¬¡æ›´æ–°çš„ç±»å‹

| Type     | ä½œç”¨                                                         |
| -------- | ------------------------------------------------------------ |
| feat     | æ–°å¢ç‰¹æ€§ (feature)                                           |
| fix      | ä¿®å¤ Bug(bug fix)                                            |
| docs     | ä¿®æ”¹æ–‡æ¡£ (documentation)                                     |
| style    | ä»£ç æ ¼å¼ä¿®æ”¹(white-space, formatting, missing semi colons, etc) |
| refactor | ä»£ç é‡æ„(refactor)                                           |
| perf     | æ”¹å–„æ€§èƒ½(A code change that improves performance)            |
| test     | æµ‹è¯•(when adding missing tests)                              |
| build    | å˜æ›´é¡¹ç›®æ„å»ºæˆ–å¤–éƒ¨ä¾èµ–ï¼ˆä¾‹å¦‚ scopes: webpackã€gulpã€npm ç­‰ï¼‰ |
| ci       | æ›´æ”¹æŒç»­é›†æˆè½¯ä»¶çš„é…ç½®æ–‡ä»¶å’Œ package ä¸­çš„ scripts å‘½ä»¤ï¼Œä¾‹å¦‚ scopes: Travis, Circle ç­‰ |
| chore    | å˜æ›´æ„å»ºæµç¨‹æˆ–è¾…åŠ©å·¥å…·(æ¯”å¦‚æ›´æ”¹æµ‹è¯•ç¯å¢ƒ)                     |
| revert   | ä»£ç å›é€€                                                     |

* ç¬¬äºŒæ­¥é€‰æ‹©æœ¬æ¬¡ä¿®æ”¹çš„èŒƒå›´ï¼ˆä½œç”¨åŸŸï¼‰

  ![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/1.1.jpeg)

- ç¬¬ä¸‰æ­¥é€‰æ‹©æäº¤çš„ä¿¡æ¯

  ![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/1.2.jpeg)

- ç¬¬å››æ­¥æäº¤è¯¦ç»†çš„æè¿°ä¿¡æ¯ï¼šè¿™é‡Œç›´æ¥å›è½¦è·³è¿‡

  ![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/1.3.jpeg)

- ç¬¬äº”æ­¥æ˜¯å¦æ˜¯ä¸€æ¬¡é‡å¤§çš„æ›´æ”¹

  ![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/1.4.jpeg)

- ç¬¬å…­æ­¥æ˜¯å¦å½±å“æŸä¸ªopen issue

  ![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/1.5.jpeg)

æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨scriptsä¸­æ„å»ºä¸€ä¸ªå‘½ä»¤æ¥æ‰§è¡Œ czï¼š

![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/å‘½ä»¤.jpeg)



### ä»£ç æäº¤éªŒè¯

å¦‚æœæˆ‘ä»¬æŒ‰ç…§czæ¥è§„èŒƒäº†æäº¤é£æ ¼ï¼Œä½†æ˜¯ä¾ç„¶æœ‰åŒäº‹é€šè¿‡ `git commit` æŒ‰ç…§ä¸è§„èŒƒçš„æ ¼å¼æäº¤åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ

* æˆ‘ä»¬å¯ä»¥é€šè¿‡commitlintæ¥é™åˆ¶æäº¤ï¼›

1.å®‰è£… @commitlint/config-conventional å’Œ @commitlint/cli

```shell
npm i @commitlint/config-conventional @commitlint/cli -D
```

2.åœ¨æ ¹ç›®å½•åˆ›å»ºcommitlint.config.jsæ–‡ä»¶ï¼Œé…ç½®commitlint

```js
module.exports = {
  extends: ['@commitlint/config-conventional']
}
```

3.ä½¿ç”¨huskyç”Ÿæˆcommit-msgæ–‡ä»¶ï¼ŒéªŒè¯æäº¤ä¿¡æ¯ï¼š(**å¯¹æäº¤ä¿¡æ¯è¿›è¡Œæ‹¦æˆª**)

```shell
npx husky add .husky/commit-msg "npx --no-install commitlint --edit $1"
```

æˆ–è€…æ‰‹åŠ¨åˆ›å»ºæ–‡ä»¶ï¼š

æˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºæ–‡ä»¶ `commit-msg`ï¼šè¯¥æ–‡ä»¶ä¸`pre-commit`æ–‡ä»¶åŒçº§

```
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npx --no-install commitlint --edit
```



æ­¤æ—¶æˆ‘ä»¬æµ‹è¯•ç”¨git commit æäº¤ï¼Œå¤±è´¥

![](./ä»£ç è§„èŒƒå®è·µå›¾ç‰‡/å¤±è´¥.jpeg)

æ‰€ä»¥æˆ‘ä»¬å¿…é¡»ç”¨npx czæäº¤ï¼Œä½†æ˜¯è¯¥å‘½ä»¤ä¸å¤ªç†Ÿæ‚‰ï¼Œè¦æ”¹å

æˆ‘ä»¬åœ¨package.jsonä¸­æ–°å¢è„šæœ¬ï¼š"commit": "cz"

æ•´ä½“é…ç½®å¦‚ä¸‹ï¼š

```
 "scripts": {
    "serve": "vue-cli-service serve",
    "build": "vue-cli-service build",
    "lint": "vue-cli-service lint",
    "prettier": "prettier --write .",
    "prepare": "husky install",
    "commit": "cz"
  },
```

ä»¥åæˆ‘ä»¬ä½¿ç”¨ `npm run commit` æ¥è¿›è¡Œæäº¤



### è¡¥å……ï¼šè‡ªå®šä¹‰ä»£ç æäº¤é£æ ¼

å¦‚æœæƒ³è‡ªå·±å®šä¹‰æäº¤è§„èŒƒä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œé¦–å…ˆè¦ä¸‹è½½è‡ªå®šä¹‰è§„èŒƒçº¦æŸçš„åŒ…æ›¿æ¢ç¬¬ä¸‰æ–¹è§„èŒƒã€‚

```arduino
npm i -D commitlint-config-cz cz-customizable
```

å˜æ›´ **commitlint.config.js** è¿™é‡Œé‡‡ç”¨è‡ªå·±å®šä¹‰çš„è§„èŒƒ,å°†ä¼šè¦†ç›–ä¸Šé¢é‚£ä¸ª,æ‰€ä»¥ä¸Šé¢é‚£ä¸ªå¯ä»¥ä¸ç”¨å®‰è£…:

```
module.exports = {
  extends: ['cz'], //é‡‡ç”¨ cz è‡ªå®šä¹‰çš„æäº¤è§„èŒƒ -> .cz-config.js
};
```

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º`.cz-config.js`ï¼Œå¯ä»¥å†è¿™ä¸ªæ–‡ä»¶é‡Œè‡ªå®šä¹‰è§„èŒƒï¼ˆä¸‹é¢è¿™æ˜¯æˆ‘è‡ªå®šä¹‰çš„é…ç½®ï¼‰

æ–°å¢`.cz-config.js`æ–‡ä»¶ï¼š

```js
  'use strict'
  module.exports = {
    types: [
      { value: 'âœ¨æ–°å¢', name: 'æ–°å¢:    æ–°çš„å†…å®¹' },
      { value: 'ğŸ›ä¿®å¤', name: 'ä¿®å¤:    ä¿®å¤ä¸€ä¸ªBug' },
      { value: 'ğŸ“æ–‡æ¡£', name: 'æ–‡æ¡£:    å˜æ›´çš„åªæœ‰æ–‡æ¡£' },
      { value: 'ğŸ’„æ ¼å¼', name: 'æ ¼å¼:    ç©ºæ ¼, åˆ†å·ç­‰æ ¼å¼ä¿®å¤' },
      { value: 'â™»ï¸é‡æ„', name: 'é‡æ„:    ä»£ç é‡æ„ï¼Œæ³¨æ„å’Œç‰¹æ€§ã€ä¿®å¤åŒºåˆ†å¼€' },
      { value: 'âš¡ï¸æ€§èƒ½', name: 'æ€§èƒ½:    æå‡æ€§èƒ½' },
      { value: 'âœ…æµ‹è¯•', name: 'æµ‹è¯•:    æ·»åŠ ä¸€ä¸ªæµ‹è¯•' },
      { value: 'ğŸ”§å·¥å…·', name: 'å·¥å…·:    å¼€å‘å·¥å…·å˜åŠ¨(æ„å»ºã€è„šæ‰‹æ¶å·¥å…·ç­‰)' },
      { value: 'âªå›æ»š', name: 'å›æ»š:    ä»£ç å›é€€' }
    ],
    scopes: [
      { name: 'leetcode' },
      { name: 'javascript' },
      { name: 'typescript' },
      { name: 'Vue' },
      { name: 'node' }
    ],
    // it needs to match the value for field type. Eg.: 'fix'
    /*  scopeOverrides: {
      fix: [
        {name: 'merge'},
        {name: 'style'},
        {name: 'e2eTest'},
        {name: 'unitTest'}
      ]
    },  */
    // override the messages, defaults are as follows
    messages: {
      type: 'é€‰æ‹©ä¸€ç§ä½ çš„æäº¤ç±»å‹:',
      scope: 'é€‰æ‹©ä¸€ä¸ªscope (å¯é€‰):',
      // used if allowCustomScopes is true
      customScope: 'Denote the SCOPE of this change:',
      subject: 'çŸ­è¯´æ˜:\n',
      body: 'é•¿è¯´æ˜ï¼Œä½¿ç”¨"|"æ¢è¡Œ(å¯é€‰)ï¼š\n',
      breaking: 'éå…¼å®¹æ€§è¯´æ˜ (å¯é€‰):\n',
      footer: 'å…³è”å…³é—­çš„issueï¼Œä¾‹å¦‚ï¼š#31, #34(å¯é€‰):\n',
      confirmCommit: 'ç¡®å®šæäº¤è¯´æ˜?(yes/no)'
    },
    allowCustomScopes: true,
    allowBreakingChanges: ['ç‰¹æ€§', 'ä¿®å¤'],
    // limit subject length
    subjectLimit: 100
  }

```

package.json ä¸­,å°†åŸæ¥commité…ç½®,å˜æ›´ä¸ºè‡ªå®šä¹‰é…ç½®:

```
// ä½¿ç”¨è‡ªå®šä¹‰è§„èŒƒåˆ™ä½¿ç”¨
"config": {
    "commitizen": {
      "path": "node_modules/cz-customizable"
    }
}
```



åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†ä¸€ä»½è¾ƒå®Œæ•´çš„ä»£ç è§„èŒƒé…ç½®ã€‚

ä»¥åå½“æˆ‘ä»¬è¿›è¡Œä»£ç æäº¤æ—¶ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š

- git add .
- npm run commit
- git push origin main



## å†™é¡¹ç›®æ—¶ï¼Œä¸€äº›Prettierçš„çƒ¦äººçš„æŠ¥é”™

### Delete `â`eslint(prettier/prettier)

å¦‚æœå­˜åœ¨.prettierrcæ–‡ä»¶æ·»åŠ å¦‚ä¸‹é…ç½®

```
"endOfLine": "auto"
```

å¦‚æœä¸å­˜åœ¨è¯¥æ–‡ä»¶ æ‰“å¼€vscodeç¼–è¾‘å™¨çš„setting.jsonæ–‡ä»¶æ·»åŠ å¦‚ä¸‹é…ç½®

```
 "prettier.endOfLine": "auto", // ç»“å°¾æ˜¯ \n \r \n\r auto
```



### Failed to load config â€œ@vue/prettierâ€œ to extend from

è¿™ç§æ˜¯ç‰ˆæœ¬é—®é¢˜ã€‚

è§£å†³æ–¹æ¡ˆ:
@vue/prettieræ”¹ä¸ºprettier
åŸå› è¿˜ä¸çŸ¥é“, @vue/prettieråœ¨@vue/ä¸‹æ²¡æ‰¾åˆ°



### return old(m, filename)ï¼› Error [ERR_REQUIRE_ESM]: require() of ES Module

åœ¨ä½¿ç”¨eslinté…ç½®æ—¶ï¼Œæäº¤å‡ºç°bug:

```
C:\Users\USER\AppData\Roaming\npm\node_modules\ts-node\dist\index.js:729
            return old(m, filename);
                   ^
Error [ERR_REQUIRE_ESM]: require() of ES Module C:\Users\USER\Desktop\tindin\node_modules\node-fetch\src\index.js from C:\Users\USER\Desktop\tindin\src\api\services\unsplash.ts not supported.
Instead change the require of index.js in C:\Users\USER\Desktop\tindin\src\api\services\unsplash.ts to a dynamic import() which is available in all CommonJS modules.
    at Object.require.extensions.<computed> [as .js] (C:\Users\USER\AppData\Roaming\npm\node_modules\ts-node\dist\index.js:729:20)
    at Object.<anonymous> (C:\Users\USER\Desktop\tindin\src\api\services\unsplash.ts:23:30)
    at Module.m._compile (C:\Users\USER\AppData\Roaming\npm\node_modules\ts-node\dist\index.js:735:29)
    at Object.require.extensions.<computed> [as .ts] (C:\Users\USER\AppData\Roaming\npm\node_modules\ts-node\dist\index.js:737:16)
    at main (C:\Users\USER\AppData\Roaming\npm\node_modules\ts-node\dist\bin.js:238:16)
    at Object.<anonymous> (C:\Users\USER\AppData\Roaming\npm\node_modules\ts-node\dist\bin.js:351:5) {
  code: 'ERR_REQUIRE_ESM'

```

æœ¬äººå‚è€ƒäº†ä¸€äº›è§£å†³æ–¹æ¡ˆï¼Œä½†éƒ½æœªè§£å†³è¯¥é—®é¢˜ï¼Œç›¸å…³è§£å†³æ–¹å¼é“¾æ¥å¦‚ä¸‹ï¼š
[return old(m, filename); Error : require() of ES Module](https://stackoverflow.com/questions/70800567/return-oldm-filename-error-err-require-esm-require-of-es-module)

æˆ‘çš„è§£å†³æ–¹å¼ï¼š å°†æ ¹ç›®å½•ä¸‹çš„ `commitlint.config.js`æ–‡ä»¶åç¼€åæ”¹ä¸º cjsï¼Œå³ commitlint.config.cjs æ–‡ä»¶



### ä»£ç è§„èŒƒé…ç½®æœªç”Ÿæ•ˆï¼Œè§£å†³æ€è·¯

æœ€å¸¸è§çš„ eslint å’Œ prettier å†²çªï¼š
eslint ä¾§é‡äºä»£ç è§„èŒƒï¼Œè€Œ prettier æ˜¯æ»¡è¶³ä»£ç è§„èŒƒå‰æä¸‹çš„æ ¼å¼ä¼˜åŒ–ã€‚å¦‚æœä¸¤è€…å†²çªï¼Œé¦–å…ˆè‚¯å®šæ˜¯ç¬¦åˆè§„èŒƒçš„ï¼Œæˆ‘ä»¬åªéœ€è¦è®© eslint å¯¹æ ¼å¼çš„è¦æ±‚æŒ‰ç…§ prettier çš„æ¥å°±è¡Œã€‚æ³¨æ„ prettier ä¸€å®šè¦ç½®äº extends çš„æœ€åï¼Œæ‰ä¸ä¼šè¢«å…¶ä»–æ‰©å±•è¦†ç›–ã€‚

```
.eslintrc.js
module.exports = {   
  extends: [ 
  	// ...
    'plugin:prettier/recommended' //æ³¨æ„è¦æ”¾åœ¨æœ€å
  ], 
};
```






å‚è€ƒæ–‡ç« ï¼š

[ã€ä¸€å¬å°±æ‡‚ã€‘ESLintæœºåˆ¶æµ…æ-æ•´ä½“æœºåˆ¶ä¸è§„èŒƒåŒ…](https://juejin.cn/post/7037426216671903780#heading-23)

[æ·±å…¥æµ…å‡º Eslintï¼Œå‘Šåˆ« Lint ææƒ§ç—‡](https://juejin.cn/post/7136458949322080292#heading-9)

[å‰ç«¯é¡¹ç›®ä»£ç è§„èŒƒè½åœ°æ–¹æ¡ˆ ESlint+Prettier](https://juejin.cn/post/6844903992330305550#heading-6)

[å‰ç«¯å·¥å…·å°æŒ‡å—ä¹‹Prettier](https://juejin.cn/post/7139686780143403039#heading-0)

[Linterä¸Šæ‰‹å®Œå…¨æŒ‡å—](https://github.yanhaixiang.com/linter-tutorial/)

[Eslint + Prettier + Husky + Commitlint+ Lint-staged è§„èŒƒå‰ç«¯å·¥ç¨‹ä»£ç è§„èŒƒ](https://juejin.cn/post/7038143752036155428#heading-5)