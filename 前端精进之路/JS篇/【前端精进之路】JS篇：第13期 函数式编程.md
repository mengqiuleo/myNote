[TOC]



## å†™åœ¨å‰é¢

è¿™é‡Œæ˜¯å°é£ä¾ PanğŸ¥³ï¼Œç«‹å¿—æˆä¸ºä¸€åä¼˜ç§€çš„å‰ç«¯ç¨‹åºåª›ï¼ï¼ï¼

æœ¬ç¯‡æ–‡ç« æ”¶å½•äºæˆ‘çš„ä¸“æ ï¼š[å‰ç«¯ç²¾è¿›ä¹‹è·¯](https://blog.csdn.net/weixin_52834435/category_11886356.html?spm=1001.2014.3001.5482)

åŒæ—¶æ”¶å½•äºæˆ‘çš„[github](https://github.com/mengqiuleo)å‰ç«¯ç¬”è®°ä»“åº“ä¸­ï¼ŒæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿star~

ğŸ‘‰[https://github.com/mengqiuleo/myNote](https://github.com/mengqiuleo/myNote)

<hr>

## ä¸€ã€ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹

### ä»‹ç»

å‡½æ•°å¼ç¼–ç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œæ˜¯**ä¸€ç§æ„å»ºè®¡ç®—æœºç¨‹åºç»“æ„å’Œå…ƒç´ çš„é£æ ¼**ï¼Œä¸»è¦æ˜¯åˆ©ç”¨å‡½æ•°æŠŠè¿ç®—è¿‡ç¨‹å°è£…èµ·æ¥ï¼Œé€šè¿‡ç»„åˆå„ç§å‡½æ•°æ¥è®¡ç®—ç»“æœã€‚å‡½æ•°å¼ç¼–ç¨‹æ„å‘³ç€ä½ å¯ä»¥åœ¨æ›´çŸ­çš„æ—¶é—´å†…ç¼–å†™å…·æœ‰æ›´å°‘é”™è¯¯çš„ä»£ç ã€‚



### å¸¸è§ç‰¹æ€§

#### æ— å‰¯ä½œç”¨

æŒ‡è°ƒç”¨å‡½æ•°æ—¶ä¸ä¼šä¿®æ”¹å¤–éƒ¨çŠ¶æ€ï¼Œå³ä¸€ä¸ªå‡½æ•°è°ƒç”¨ n æ¬¡åä¾ç„¶è¿”å›åŒæ ·çš„ç»“æœã€‚

```js
var a = 1;
// å«æœ‰å‰¯ä½œç”¨ï¼Œå®ƒä¿®æ”¹äº†å¤–éƒ¨å˜é‡ a
// å¤šæ¬¡è°ƒç”¨ç»“æœä¸ä¸€æ ·
function test1() {
  a++
  return a;
}

// æ— å‰¯ä½œç”¨ï¼Œæ²¡æœ‰ä¿®æ”¹å¤–éƒ¨çŠ¶æ€
// å¤šæ¬¡è°ƒç”¨ç»“æœä¸€æ ·
function test2(a) {
  return a + 1;
}
```

#### é€æ˜å¼•ç”¨

æŒ‡ä¸€ä¸ªå‡½æ•°åªä¼šç”¨åˆ°ä¼ é€’ç»™å®ƒçš„å˜é‡ä»¥åŠè‡ªå·±å†…éƒ¨åˆ›å»ºçš„å˜é‡ï¼Œä¸ä¼šä½¿ç”¨åˆ°å…¶ä»–å˜é‡ã€‚

```js
var a = 1;
var b = 2;
// å‡½æ•°å†…éƒ¨ä½¿ç”¨çš„å˜é‡å¹¶ä¸å±äºå®ƒçš„ä½œç”¨åŸŸ
function test1() {
  return a + b;
}
// å‡½æ•°å†…éƒ¨ä½¿ç”¨çš„å˜é‡æ˜¯æ˜¾å¼ä¼ é€’è¿›å»çš„
function test2(a, b) {
  return a + b;
}
```

#### ä¸å¯å˜å˜é‡

æŒ‡çš„æ˜¯ä¸€ä¸ªå˜é‡ä¸€æ—¦åˆ›å»ºåï¼Œå°±ä¸èƒ½å†è¿›è¡Œä¿®æ”¹ï¼Œä»»ä½•ä¿®æ”¹éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å˜é‡ã€‚ä½¿ç”¨ä¸å¯å˜å˜é‡æœ€å¤§çš„å¥½å¤„æ˜¯çº¿ç¨‹å®‰å…¨ã€‚å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è®¿é—®åŒä¸€ä¸ªä¸å¯å˜å˜é‡ï¼Œè®©å¹¶è¡Œå˜å¾—æ›´å®¹æ˜“å®ç°ã€‚ ç”±äº JavaScript åŸç”Ÿä¸æ”¯æŒä¸å¯å˜å˜é‡ï¼Œéœ€è¦é€šè¿‡ç¬¬ä¸‰æ–¹åº“æ¥å®ç°ã€‚ (å¦‚ Immutable.jsï¼ŒMori ç­‰ç­‰)

```js
var obj = Immutable({ a: 1 });
var obj2 = obj.set('a', 2);
console.log(obj);  // Immutable({ a: 1 })
console.log(obj2); // Immutable({ a: 2 })
```



### çº¯å‡½æ•°

å¦‚æœå‡½æ•°çš„è°ƒç”¨å‚æ•°ç›¸åŒï¼Œåˆ™æ°¸è¿œè¿”å›ç›¸åŒçš„ç»“æœã€‚å®ƒä¸ä¾èµ–äºç¨‹åºæ‰§è¡ŒæœŸé—´å‡½æ•°å¤–éƒ¨ä»»ä½•çŠ¶æ€æˆ–æ•°æ®çš„å˜åŒ–ï¼Œå¿…é¡»åªä¾èµ–äºå…¶è¾“å…¥çš„å‚æ•°(ç›¸åŒçš„è¾“å…¥ï¼Œå¿…é¡»å¾—åˆ°ç›¸åŒçš„è¾“å‡º)ã€‚

```js
/ çº¯å‡½æ•°
const calculatePrice=ï¼ˆpriceï¼Œdiscountï¼‰=> price * discount
let price = calculatePriceï¼ˆ200ï¼Œ0ï¼Œ8ï¼‰
console.log(price)

// ä¸çº¯å‡½æ•°
const calculatePrice=ï¼ˆpriceï¼Œdiscountï¼‰=>{
      const dt= new Date().toISOString()
        console.log(`${dt}:${something}`)
        return something
 }
foo('hello')
```



### å‡½æ•°å‰¯ä½œç”¨

- å½“è°ƒç”¨å‡½æ•°æ—¶ï¼Œé™¤äº†è¿”å›å‡½æ•°å€¼å¤–ï¼Œè¿˜å¯¹æ³¨è°ƒç”¨å‡½æ•°äº§ç”Ÿé™„åŠ çš„å½±å“

- ä¾‹å¦‚ä¿®æ”¹å…¨å±€å˜é‡ï¼ˆå‡½æ•°å¤–çš„å˜é‡ï¼‰æˆ–ä¿®æ”¹å‚æ•°

  ```javascript
  //å‡½æ•°å¤–aè¢«æ”¹å˜ï¼Œè¿™å°±æ˜¯å‡½æ•°çš„å‰¯ä½œç”¨
  let a = 5
  let foo = () => (a = a * 10)
  foo()
  console.log(a) // 50
  
  let arr = [1, 2, 3, 4, 5, 6]
  arr.slice(1, 3) //çº¯å‡½æ•°ï¼Œè¿”å›[2,3],åŸæ•°ç»„ä¸æ”¹å˜
  arr.splice(1, 3) // éçº¯å‡½æ•°ï¼Œè¿”å›[2,3,4],åŸæ•°ç»„è¢«æ”¹å˜
  arr.pop() // éçº¯å‡½æ•°ï¼Œè¿”å›6ï¼ŒåŸæ•°ç»„æ”¹å˜
  ```



### å‡½æ•°å‰¯ä½œç”¨å¯å˜æ€§å’Œä¸å¯å˜æ€§

- å¯å˜æ€§æ˜¯æŒ‡ä¸€ä¸ªå˜é‡åˆ›å»ºä»¥åå¯ä»¥ä»»æ„ä¿®æ”¹
- ä¸å¯å˜æ€§æŒ‡ä¸€ä¸ªå˜é‡ï¼Œä¸€æ—¦è¢«åˆ›å»ºï¼Œå°±æ°¸è¿œä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä¸å¯å˜æ€§æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µ

```js
// javascriptä¸­çš„å¯¹è±¡éƒ½æ˜¯å¼•ç”¨ç±»å‹ï¼Œå¯å˜æ€§ä½¿ç¨‹åºå…·æœ‰ä¸ç¡®å®šæ€§ï¼Œè°ƒç”¨å‡½æ•°fooåï¼Œæˆ‘ä»¬çš„å¯¹è±¡å°±å‘ç”Ÿäº†æ”¹å˜ï¼›è¿™å°±æ˜¯å¯å˜æ€§ï¼Œjsä¸­æ²¡æœ‰åŸç”Ÿçš„ä¸å¯å˜æ€§
let data = { count: 1 }
let foo = data => {
  data.count = 3
}
console.log(data.count) // 1
foo(data)
console.log(data.count) // 3

// æ”¹è¿›åä½¿æˆ‘ä»¬çš„æ•°æ®å…·æœ‰ä¸å¯å˜æ€§
let data = { count: 1 }
let foo = data => {
  let lily = JSON.parse(JSON.stringify(data)) // let lily= {...data} ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦å»åšæ‹·è´ï¼Œåªèƒ½æ‹·è´ç¬¬ä¸€å±‚
  lily.count = 3
}
console.log(data.count) // 1
foo(data)
console.log(data.count) // 1
```



## äºŒã€é«˜é˜¶å‡½æ•°

- æ¥å—ä¸€ä¸ªæˆ–å¤šä¸ªå‡½æ•°ä½œä¸ºè¾“å…¥
- è¾“å‡ºä¸€ä¸ªå‡½æ•°

JavaScript è¯­è¨€ä¸­å†…ç½®äº†ä¸€äº›é«˜é˜¶å‡½æ•°ï¼Œæ¯”å¦‚ Array.prototype.mapï¼ŒArray.prototype.filter å’Œ Array.prototype.reduceï¼Œå®ƒä»¬æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶åº”ç”¨è¿™ä¸ªå‡½æ•°åˆ°åˆ—è¡¨çš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚



### Array.prototype.map

ç°åœ¨æœ‰ä¸€ä¸ªæ•°ç»„ `[1, 2, 3, 4]`ï¼Œæˆ‘ä»¬æƒ³è¦ç”Ÿæˆä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶æ¯ä¸ªå…ƒç´ çš†æ˜¯ä¹‹å‰æ•°ç»„çš„ä¸¤å€.

```js
const arr1 = [1, 2, 3, 4];
const arr2 = arr1.map(item => item * 2);

console.log( arr2 );
// [2, 4, 6, 8]
console.log( arr1 );
// [1, 2, 3, 4]
```



### Array.prototype.filter

ç°åœ¨æœ‰ä¸€ä¸ªæ•°ç»„ `[1, 2, 1, 2, 3, 5, 4, 5, 3, 4, 4, 4, 4]`ï¼Œæˆ‘ä»¬æƒ³è¦ç”Ÿæˆä¸€ä¸ªæ–°æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„è¦æ±‚æ²¡æœ‰é‡å¤çš„å†…å®¹ï¼Œå³ä¸ºå»é‡ã€‚

```js
const arr1 = [1, 2, 1, 2, 3, 5, 4, 5, 3, 4, 4, 4, 4];
const arr2 = arr1.filter( (element, index, self) => {
    return self.indexOf( element ) === index;
});

console.log( arr2 );
// [1, 2, 3, 5, 4]
console.log( arr1 );
// [1, 2, 1, 2, 3, 5, 4, 5, 3, 4, 4, 4, 4]
```



### Array.prototype.reduce

ç°åœ¨æœ‰ä¸€ä¸ªæ•°ç»„ `[0, 1, 2, 3, 4]`ï¼Œéœ€è¦è®¡ç®—æ•°ç»„å…ƒç´ çš„å’Œ.

```js
// ä½¿ç”¨é«˜é˜¶å‡½æ•°
const arr = [5, 7, 1, 8, 4];
const sum = arr.reduce((accumulator, currentValue) => accumulator + currentValue,0);
console.log(sum)//25
```



## ä¸‰ã€å‡½æ•°æŸ¯é‡ŒåŒ–

æŸ¯é‡ŒåŒ–åˆç§°éƒ¨åˆ†æ±‚å€¼ï¼ŒæŸ¯é‡ŒåŒ–å‡½æ•°ä¼šæ¥æ”¶ä¸€äº›å‚æ•°ï¼Œç„¶åä¸ä¼šç«‹å³æ±‚å€¼ï¼Œè€Œæ˜¯ç»§ç»­è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå°†ä¼ å…¥çš„å‚æ•°é€šè¿‡é—­åŒ…çš„å½¢å¼ä¿å­˜ï¼Œç­‰åˆ°è¢«çœŸæ­£æ±‚å€¼çš„æ—¶å€™ï¼Œå†ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰ä¼ å…¥çš„å‚æ•°è¿›è¡Œæ±‚å€¼ã€‚

### demo

```js
// æ™®é€šå‡½æ•°
function add(x,y){
    return x + y;
}
add(1,2); // 3
// å‡½æ•°æŸ¯é‡ŒåŒ–
var add = function(x) {
  return function(y) {
    return x + y;
  };
};
var increment = add(1);
increment(2);// 3
```



**ä½œç”¨ï¼š**

ä¸»è¦æœ‰ 3 ä¸ªä½œç”¨ï¼š **å‚æ•°å¤ç”¨**ã€**æå‰è¿”å›**å’Œ **å»¶è¿Ÿæ‰§è¡Œ**

å‚æ•°å¤ç”¨ï¼šæˆ‘ä»¬å¯ä»¥ä¼ å…¥éƒ¨åˆ†å‚æ•°ï¼Œç„¶åæ‹¿ç€è¿”å›çš„å‡½æ•°å†åŠ å…¥æ–°çš„å‚æ•°ï¼Œè¿™æ ·å‰é¢ä¼ å…¥çš„å‚æ•°å°±åšåˆ°äº†å‚æ•°å¤ç”¨ã€‚

æå‰è¿”å› å’Œ å»¶è¿Ÿæ‰§è¡Œ ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå› ä¸ºæ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œå®ƒåªæ¥å—ä¸€éƒ¨åˆ†å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå‡½æ•°ï¼ˆæå‰è¿”å›ï¼‰ï¼Œç›´åˆ°(å»¶è¿Ÿæ‰§è¡Œ)ä¼ é€’æ‰€æœ‰å‚æ•°ä¸ºæ­¢ã€‚



### å®ç°

```js
function currying(fn, ...args) {
  const length = fn.length;
  let allArgs = [...args];
  const res = (...newArgs) => {
    allArgs = [...allArgs, ...newArgs];
    if (allArgs.length === length) {
      return fn(...allArgs);
    } else {
      return res;
    }
  };
  return res;
}

// ç”¨æ³•å¦‚ä¸‹ï¼š
// const add = (a, b, c) => a + b + c;
// const a = currying(add, 1);
// console.log(a(2,3))
```



## å››ã€å‡½æ•°ç»„åˆ (Composition)

å‡è®¾æœ‰ä¸€ä¸ª compose å‡½æ•°ï¼Œå®ƒå¯ä»¥æ¥å—å¤šä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚å½“æˆ‘ä»¬ä¸ºè¿™ä¸ªæ–°å‡½æ•°ä¼ é€’å‚æ•°æ—¶ï¼Œè¯¥å‚æ•°å°±ä¼šã€Œæµã€è¿‡å…¶ä¸­çš„å‡½æ•°ï¼Œæœ€åè¿”å›ç»“æœã€‚

```js
// ç”¨æ³•å¦‚ä¸‹:
function fn1(x) {
  return x + 1;
}
function fn2(x) {
  return x + 2;
}
function fn3(x) {
  return x + 3;
}
function fn4(x) {
  return x + 4;
}
const a = compose(fn1, fn2, fn3, fn4);
console.log(a(1)); // 1+4+3+2+1=11
```



æˆ‘ä»¬composeçš„ä½œç”¨å°±æ˜¯å°†åµŒå¥—æ‰§è¡Œçš„æ–¹æ³•ä½œä¸ºå‚æ•°å¹³é“ºï¼ŒåµŒå¥—æ‰§è¡Œçš„æ—¶å€™ï¼Œ**é‡Œé¢çš„æ–¹æ³•å°±æ˜¯å³è¾¹çš„æ–¹æ³•æœ€å¼€å§‹æ‰§è¡Œ**ï¼Œç„¶åå¾€å·¦è¾¹è¿”å›ã€‚

```js
function compose(...fns){
  return (arg) => 
    fns.reduceRight((prev,fn) => {
      return fn(prev)
    },arg)
}
```

**è§£é‡Š**

é¦–å…ˆæˆ‘ä»¬è¦ä¼ å…¥ä¸€äº›å‡½æ•°ï¼Œå³`...fns`ã€‚å¹¶ä¸”é€šè¿‡composeå‡½æ•°æˆ‘ä»¬è¦`return`ä¸€ä¸ªå‡½æ•°ã€‚

returnçš„è¿™ä¸ªå‡½æ•°ä¼ å…¥çš„å‚æ•°å°±æ˜¯æˆ‘ä»¬è¦è®¡ç®—çš„åˆå§‹å€¼ã€‚

æ³¨æ„ï¼šå¦‚æœç®­å¤´å‡½æ•°çš„è¿”å›å€¼åªæœ‰ä¸€ä¸ªå¼å­ï¼Œé‚£ä¹ˆå¯ä»¥ä¸ä½¿ç”¨{}å’Œreturnã€‚

åœ¨å‡½æ•°ä½“çš„æ“ä½œä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä»å³å¾€å·¦éå†æ‰€æœ‰çš„å‡½æ•°ï¼Œprevæ˜¯ä¸Šä¸€æ¬¡è¿”å›çš„å€¼ï¼Œfnæ˜¯å½“å‰å¤„ç†çš„å‡½æ•°ï¼Œå¹¶ä¸”è¦æŠŠargå½“åšåˆå§‹å€¼ä¼ å…¥ã€‚

åœ¨å‡½æ•°ä½“ä¸­ï¼Œæˆ‘ä»¬è¦è¿”å›å½“å‰fnå‡½æ•°çš„æ‰§è¡Œç»“æœä½œä¸ºprevçš„å€¼ã€‚



### pipeå‡½æ•°

`compose`æ‰§è¡Œæ˜¯ä»å³åˆ°å·¦çš„ã€‚è€Œç®¡é“å‡½æ•°ï¼Œæ‰§è¡Œé¡ºåºæ˜¯ä»å·¦åˆ°å³æ‰§è¡Œçš„

```js
function compose(...fns){
  return (arg) => 
    fns.reduce((prev,fn) => {
      return fn(prev)
    },arg)
}
```



## äº”ã€åå‡½æ•°

æŸ¯é‡ŒåŒ–æ˜¯å°†ä¸€ä¸ªå¤šå‚æ•°å‡½æ•°è½¬æ¢æˆå¤šä¸ªå•å‚æ•°å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å°†ä¸€ä¸ª n å…ƒå‡½æ•°è½¬æ¢æˆ n ä¸ªä¸€å…ƒå‡½æ•°ã€‚

å±€éƒ¨åº”ç”¨åˆ™æ˜¯å›ºå®šä¸€ä¸ªå‡½æ•°çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯å°†ä¸€ä¸ª n å…ƒå‡½æ•°è½¬æ¢æˆä¸€ä¸ª n - x å…ƒå‡½æ•°ã€‚

- æŸ¯é‡ŒåŒ–ï¼šf(a,b,c)=f(a)(b)(c)
- åå‡½æ•°ï¼šf(a,b,c)=f(a,b)(c)

```js
/*
    ç”¨bindå‡½æ•°å®ç°åå‡½æ•°ï¼Œbindçš„å¦ä¸€ä¸ªç”¨æ³•ä½¿ä¸€ä¸ªå‡½æ•°æ‹¥æœ‰é¢„è®¾çš„åˆå§‹å‚æ•°ï¼Œå°†è¿™äº›å‚æ•°å†™åœ¨bindçš„ç¬¬ä¸€ä¸ªå‚æ•°åï¼Œ
    å½“ç»‘å®šå‡½æ•°è°ƒç”¨æ—¶ï¼Œä¼šæ’å…¥ç›®æ ‡å‡½æ•°çš„åˆå§‹ä½ç½®ï¼Œè°ƒç”¨å‡½æ•°ä¼ å…¥çš„å‚æ•°ä¼šè·Ÿåœ¨bindä¼ å…¥çš„åé¢
  */
let add = (x, y) => x + y
let rst = add.bind(null, 1)
rst(2) //3
```



## å…­ã€é˜²æŠ–ä¸èŠ‚æµ

### é˜²æŠ–

ä½ å°½ç®¡è§¦å‘äº‹ä»¶ï¼Œä½†æ˜¯æˆ‘ä¸€å®šåœ¨äº‹ä»¶è§¦å‘ n ç§’åæ‰æ‰§è¡Œï¼Œå¦‚æœä½ åœ¨ä¸€ä¸ªäº‹ä»¶è§¦å‘çš„ n ç§’å†…åˆè§¦å‘äº†è¿™ä¸ªäº‹ä»¶ï¼Œé‚£æˆ‘å°±ä»¥æ–°çš„äº‹ä»¶çš„æ—¶é—´ä¸ºå‡†ï¼Œn ç§’åæ‰æ‰§è¡Œï¼Œæ€»ä¹‹ï¼Œå°±æ˜¯è¦ç­‰ä½ è§¦å‘å®Œäº‹ä»¶ n ç§’å†…ä¸å†è§¦å‘äº‹ä»¶ï¼Œæˆ‘æ‰æ‰§è¡Œã€‚

```js
function debounce(fn,delay){
      //1.å®šä¹‰ä¸€ä¸ªå®šæ—¶å™¨ï¼Œä¿å­˜ä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨
      let timer = null
      
      //2.çœŸæ­£æ‰§è¡Œçš„å‡½æ•°
      return function(...args){
        //å–æ¶ˆä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨
        if(timer){
          clearTimeout(timer)
        }
        //å»¶è¿Ÿæ‰§è¡Œ
        timer = setTimeout(() => {
          //æ‰§è¡Œå¤–éƒ¨ä¼ å…¥çš„å‡½æ•°
          fn.apply(this,args)
        }, delay);
      }
    }
```

- thisç»‘å®šï¼šçœŸæ­£æ‰§è¡Œçš„å‡½æ•°æ˜¯è¦ç»‘å®šæˆ‘ä»¬è¿”å›çš„å‡½æ•°ï¼Œè€Œç®­å¤´å‡½æ•°æ²¡æœ‰thisï¼Œå®ƒçš„thisæŒ‡å‘ä¸Šå±‚ä½œç”¨åŸŸï¼Œæ­£å¥½æ˜¯æˆ‘ä»¬è¿”å›çš„å‡½æ•°

- å‚æ•°ä¼ é€’ï¼šå› ä¸ºçœŸæ­£æ‰§è¡Œçš„å‡½æ•°æ˜¯æˆ‘ä»¬è¿”å›çš„å‡½æ•°ï¼Œæ‰€ä»¥å‚æ•°æ˜¯æ”¾åœ¨è¿”å›çš„é‚£ä¸ªå‡½æ•°ä¸­ï¼Œç›´æ¥è§£æ„

**éªŒè¯**

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <input type="text">


  <script>
    function debounce(fn,delay){
      //1.å®šä¹‰ä¸€ä¸ªå®šæ—¶å™¨ï¼Œä¿å­˜ä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨
      let timer = null
      
      //2.çœŸæ­£æ‰§è¡Œçš„å‡½æ•°
      return function(...args){
        //å–æ¶ˆä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨
        if(timer){
          clearTimeout(timer)
        }
        //å»¶è¿Ÿæ‰§è¡Œ
        timer = setTimeout(() => {
          //æ‰§è¡Œå¤–éƒ¨ä¼ å…¥çš„å‡½æ•°
          fn.apply(this,args)
        }, delay);
      }
    }


    const inputEl = document.querySelector('input');
    let counter = 0

    const inputChange = function(){
      console.log(`å‘é€äº†ç¬¬${++counter}æ¬¡ç½‘ç»œè¯·æ±‚`)
    }

    inputEl.oninput = debounce(inputChange, 1000)
  </script>
</body>
</html>
```



### èŠ‚æµ

å½“äº‹ä»¶æŒç»­è§¦å‘æ—¶ï¼ŒèŠ‚æµæ“ä½œå¯ä»¥**ç¨€é‡Š**äº‹ä»¶å¤„ç†å‡½æ•°æ‰§è¡Œé¢‘ç‡ï¼Œå‡è®¾åœ¨`1s`å†…`onmousemove`äº‹ä»¶è§¦å‘äº†`100`æ¬¡ï¼Œé€šè¿‡èŠ‚æµå°±å¯ä»¥ä½¿å¾—`onmousemove`äº‹ä»¶çš„äº‹ä»¶å¤„ç†å‡½æ•°æ¯`100ms`è§¦å‘ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯åœ¨`1s`å†…`onmousemove`äº‹ä»¶çš„äº‹ä»¶å¤„ç†å‡½æ•°åªæ‰§è¡Œ`10`æ¬¡ã€‚

æ–¹æ³•1: **å®šæ—¶å™¨æ–¹å¼å®ç°**

ç¼ºç‚¹ï¼šç¬¬ä¸€æ¬¡è§¦å‘äº‹ä»¶ä¸ä¼šç«‹å³æ‰§è¡Œfnï¼Œéœ€è¦ç­‰delayé—´éš”è¿‡åæ‰ä¼šæ‰§è¡Œ

```js
let throttle = (fn, delay) => {
      let flag = false
      return function(...args) {
        if (flag) return
        flag = true
        setTimeout(() => {
          fn(...args)
          flag = false
        }, delay)
      }
}
```



æ–¹æ³•2:**æ—¶é—´æˆ³æ–¹å¼å®ç°**

ç¼ºç‚¹ï¼šæœ€åä¸€æ¬¡è§¦å‘å›è°ƒä¸å‰ä¸€æ¬¡çš„è§¦å‘å›è°ƒçš„æ—¶é—´å·®å°äºdelayï¼Œåˆ™æœ€åä¸€æ¬¡è§¦å‘äº‹ä»¶ä¸ä¼šæ‰§è¡Œå›è°ƒ

```js
const throttle2 = (fn, wait = 50) => {
    // ä¸Šä¸€æ¬¡æ‰§è¡Œ fn çš„æ—¶é—´
    let previous = 0
    // å°† throttle å¤„ç†ç»“æœå½“ä½œå‡½æ•°è¿”å›
    return function(...args) {
        // è·å–å½“å‰æ—¶é—´ï¼Œè½¬æ¢æˆæ—¶é—´æˆ³ï¼Œå•ä½æ¯«ç§’
        let now = +new Date()
        // å°†å½“å‰æ—¶é—´å’Œä¸Šä¸€æ¬¡æ‰§è¡Œå‡½æ•°çš„æ—¶é—´è¿›è¡Œå¯¹æ¯”
        // å¤§äºç­‰å¾…æ—¶é—´å°±æŠŠ previous è®¾ç½®ä¸ºå½“å‰æ—¶é—´å¹¶æ‰§è¡Œå‡½æ•° fn
        if (now - previous > wait) {
            previous = now
            fn.apply(this, args)
        }
    }
}
```

**è§£é‡Šè¿™é‡Œçš„ `+new Date()`**

jsåœ¨æŸä¸ªæ•°æ®ç±»å‹å‰ä½¿ç”¨â€˜+â€™ï¼Œè¿™ä¸ªæ“ä½œç›®çš„æ˜¯ä¸ºäº†å°†è¯¥æ•°æ®ç±»å‹è½¬æ¢ä¸ºNumberç±»å‹ï¼Œå¦‚æœè½¬æ¢å¤±è´¥ï¼Œåˆ™è¿”å›NaN;

```javascript
+'2'+1 // 3
+[1]   // NaN
```

+new Date() ä¼šè°ƒç”¨Date.prototype ä¸Šé¢çš„ valueOfæ–¹æ³•

ä¸‹é¢çš„ä¾‹å­è¿”å›æ•ˆæœç­‰åŒï¼š

```js
+new Date();

new Date().getTime();

new Date().valueOf();

new Date()*1
```



**éªŒè¯**ï¼š

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
  <button>ç‚¹å‡»</button>
  <script>
    /*
     * è¿ç»­ç‚¹å‡»åªä¼š1000æ‰§è¡Œä¸€æ¬¡btnClickå‡½æ•°
     */
    let obutton = document.getElementsByTagName('button')[0]
    //  å¦‚æœç”¨ç®­å¤´å‡½æ•°ï¼Œç®­å¤´å‡½æ•°æ²¡æœ‰argumentsï¼Œä¹Ÿä¸èƒ½é€šè¿‡applyæ”¹å˜thisæŒ‡å‘
    function btnClick() {
      console.log('æˆ‘å“åº”äº†')
    }
    /*
            æ–¹æ³•1: å®šæ—¶å™¨æ–¹å¼å®ç°
            ç¼ºç‚¹ï¼šç¬¬ä¸€æ¬¡è§¦å‘äº‹ä»¶ä¸ä¼šç«‹å³æ‰§è¡Œfnï¼Œéœ€è¦ç­‰delayé—´éš”è¿‡åæ‰ä¼šæ‰§è¡Œ
         */
    let throttle = (fn, delay) => {
      let flag = false
      return function(...args) {
        if (flag) return
        flag = true
        setTimeout(() => {
          fn(...args)
          flag = false
        }, delay)
      }
    }
    /*
            æ–¹æ³•2:æ—¶é—´æˆ³æ–¹å¼å®ç°
            ç¼ºç‚¹ï¼šæœ€åä¸€æ¬¡è§¦å‘å›è°ƒä¸å‰ä¸€æ¬¡çš„è§¦å‘å›è°ƒçš„æ—¶é—´å·®å°äºdelayï¼Œåˆ™æœ€åä¸€æ¬¡è§¦å‘äº‹ä»¶ä¸ä¼šæ‰§è¡Œå›è°ƒ
          */
    // fn æ˜¯éœ€è¦æ‰§è¡Œçš„å‡½æ•°
    // wait æ˜¯æ—¶é—´é—´éš”
    const throttle2 = (fn, wait = 50) => {
      // ä¸Šä¸€æ¬¡æ‰§è¡Œ fn çš„æ—¶é—´
      let previous = 0
      // å°† throttle å¤„ç†ç»“æœå½“ä½œå‡½æ•°è¿”å›
      return function(...args) {
        // è·å–å½“å‰æ—¶é—´ï¼Œè½¬æ¢æˆæ—¶é—´æˆ³ï¼Œå•ä½æ¯«ç§’
        let now = +new Date()
        // å°†å½“å‰æ—¶é—´å’Œä¸Šä¸€æ¬¡æ‰§è¡Œå‡½æ•°çš„æ—¶é—´è¿›è¡Œå¯¹æ¯”
        // å¤§äºç­‰å¾…æ—¶é—´å°±æŠŠ previous è®¾ç½®ä¸ºå½“å‰æ—¶é—´å¹¶æ‰§è¡Œå‡½æ•° fn
        if (now - previous > wait) {
          previous = now
          fn.apply(this, args)
        }
      }
    }


    obutton.onclick = throttle(btnClick, 1000)
  </script>
  </body>
</html>
```

